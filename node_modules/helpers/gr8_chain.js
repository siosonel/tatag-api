var pendingFxn = {}

var pendingArr = []

main.useFxn = function (fxn, type) {
	pendingFxn[type] = fxn; 
	
	if (resource[type]) {
		var result = pendingFxn[type](resource[type])
		if (pendingArr.length) {
			var nextFxn = pendingArr.shift()
			nextFxn(result)
		}
	}
	else request.get(resource.root[type])
		.auth(obj.user, obj.pass)
		.expect(function (res) { console.log(resource.root[type])
			if (!res || !res.body) return; 
			if (res.body['@graph']) res.body['@graph'].map(processGraph)
			else resource[type] = res.body;
			
			if (!resource[type]) "Resource "+ type +" not found.";
			else if (pendingFxn[type]) pendingFxn[type](resource[type])
		})
		.end(done)
}