<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<title>API Reference</title>

	<link href="/common2/lib/slate/screen.css" rel="stylesheet" type="text/css" media="screen" />
	<link href="/common2/lib/slate/print.css" rel="stylesheet" type="text/css" media="print" />
	
	<style>
	.tocify-wrapper img	{
    height: 5rem;
    margin: auto;
		margin-top: 1rem;
	}
	
	.tocify-subheader .tocify-subheader .tocify-item>a { 
		padding-left: 3.5rem;
		font-size: 12px;
	}
	
	.tocify-subheader .tocify-subheader .tocify-subheader .tocify-item>a { 
		padding-left: 5rem;
		font-size: 12px;
	}
	
	.content h3, .content h4 {
			font-size: 12px;
			margin-top: 4em;
			margin-bottom: 0.8em;
			text-transform: none;
	}
	</style>
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
		<script src="/common2/lib/slate/all.js" type="text/javascript"></script>

		<script>
			$(function() {
				setupLanguages(["javascript"]);
			});
		</script>
</head>
<body class="index">	
	<a href="#" id="nav-button">
		<span>
			NAV
			<!--<img src="images/navbar.png" />-->
		</span>
	</a>
	<div class="tocify-wrapper">
		<img src="/ui/css/logo5.png" />
			<div class="lang-selector">
				<a href='#' data-language-name='javascript'>javascript</a>
			</div>
			<div class="search">
				<input type="text" class="search" id="input-search" placeholder="Search">
			</div>
			<ul class="search-results"></ul>
		<div id="toc">
		</div>
			<ul class="toc-footer">
					<!--<li><a href='#'>Sign Up for a Developer Key</a></li>-->
					<li><a href='http://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
			</ul>
	</div>
	<div class="page-wrapper">
		<div class="dark-box"></div>
		<div class='content'>
			<h1 id="introduction">Introduction</h1>
<p>Welcome to tatag.cc's API.</p>
<h1 id="resource-orientation">Resource Orientation</h1>
<h2 id="navigation">Navigation</h2>
<blockquote>
<p>Examples of the supported navigational approaches</p>
</blockquote>
<pre><code>api.loadConcept('my-memberships') 
.then(okHandler, errHandler) </code></pre>
<p>To get a target resource, the client looks in the root resource to fill-in applicable URL-templates or to follow directions along a given sequence of link relations. This approach is tolerant of changes in the URL structure and media type, and may be likened to always asking for directions to a certain warehous item - you will be able to find something even if there are changes to the aisle-number or the corridor layout. The API consumer will also be more likely to be able to navigate different warehouses.</p>
<h2 id="methods">Methods</h2>
<p>Resources may be linked to forms for creating, editing, or otherwise affecting its state. API clients should not assume that a particular resource will always support the same set of methods. Instead, a client should check for the existence of any of the following form links before initiating the corresponding display or action options.</p>
<ul>
<li>createForm</li>
<li>editForm</li>
<li>budgetAdd</li>
<li>budgetTransfer</li>
<li>budgetUse</li>
<li>approve</li>
<li>reject</li>
</ul>
<h2 id="tolerance">Tolerance</h2>
<p>The client must be programmed with tolerance in mind, to accomodate potential variations in labels and methods as seen above. Many of these concerns are automatically handled by generic API clients, such as for the Phlat profile. We recommend using generic media-type or profile clients to minimize the effort in getting started and to increase the long-term stability of the consumer application.</p>
<p>The API consumer should gracefully handle the following: </p>
<ul>
<li>Changes to a resource's URL (not an issue if you use concept-based navigation)</li>
<li>Embedded links, i.e., a link value is the resource object instead of just that resource's string URL</li>
<li>Unknown properties, which the client should ignore</li>
<li>&quot;Missing&quot; methods</li>
<li>Changes to the API's sitemap or relation layout (not an issue if you use concept-based navigation)</li>
</ul>
<h1 id="versioning">Versioning</h1>
<blockquote>
<p>Deprecated example</p>
</blockquote>
<pre><code>
GET /api-20150101/something

// before merging the deprecated attributes or links
{
    "@id": "/api-20150101/something", 
    "name": "example resource",
    "deprecated": [{
        "date": 20151019, 
        "reason": "old attributes",
        "merge-patch": {
            "attr1": "value 1",
            "attr2": "value 2"
        }
    }]
}

// after the client merges in the deprecated attributes
// and then deleting the "deprecated" array of objects 
{
    "@id": "/api-20150101/something", 
    "name": "example resource",
    "attr1": "value 1",
    "attr2": "value 2"
}
</code></pre>
<p>A type of change that is not expected to be handled gracefully is a deprecated resource attribute or relation name. In order to avoid breaking, clients must be able to process the link relation &quot;deprecated&quot;. This link relation points to an array of objects, each representing a deprecation timepoint, an explanation, and a merge-patch object that can be used to extend the current resource with the deprecated attributes and links.</p>
<h1 id="authentication">Authentication</h1>
<p>A bit of a dance using Oauth.</p>
<h1 id="public-resources">Public Resources</h1>
<p>These resources do not require a user to be logged-in.</p>
<h2 id="public-brands">public-brands</h2>
<pre><code class="language-javascript">
api.loadConcept('public-brands');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "pageOrder": "asc",
    "itemsLimit": 50,
    "collectionOf": "brand",
    "pageOf": "/brand/collection",
    "@id": "/brand/collection",
    "@type": "brandCollection",
    "numBrands": 13,
    "earliest": "2015-01-05 11:53:31",
    "latest": "2015-11-18 20:21:32",
    "brand": [
        {
            "brand_id": 104,
            "name": "abc",
            "description": "for testing",
            "created": "2015-01-05 11:53:31",
            "updated": null,
            "ended": null,
            "url": null,
            "advisor": "http://tatag.dev/api/advisor.php/{?brand_id,revBudget,expBudget,inflow,outflow,numMembers,totalMemberHours}",
            "type_system": "for-profit",
            "type_id": 9,
            "country_code": "USA",
            "area_code": 206,
            "@id": "/brand/104/about"
        },
        {
            "brand_id": 105,
            "name": "def",
            "description": "for testing",
            "created": "2015-01-05 11:53:33",
            "updated": null,
            "ended": null,
            "url": null,
            "advisor": "http://tatag.dev/api/advisor.php/{?brand_id,revBudget,expBudget,inflow,outflow,numMembers,totalMemberHours}",
            "type_system": "for-profit",
            "type_id": 9,
            "country_code": "USA",
            "area_code": 206,
            "@id": "/brand/105/about"
        },
        {
            "brand_id": 106,
            "name": "~Amazon.com, Boren Avenue North, Seattle, WA, United States",
            "description": "This is a simulated brand to be used for testing the tatag system.",
            "created": "2015-08-08 18:38:54",
            "updated": null,
            "ended": null,
            "url": null,
            "advisor": null,
            "type_system": "sim",
            "type_id": 10,
            "country_code": "USA",
            "area_code": 206,
            "@id": "/brand/106/about"
        }
    ],
    "add": "/form/brand-registration"
}</code></pre>
<p>A collection or paged list of public-brand. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>collectionOf</td><td>string</td><td>The term used for the collection item. For example, instead of promos.items, you could use promos.promo or promos[promos.collectionOf].</td></tr><tr><td>earliest</td><td>string</td><td>...</td></tr><tr><td>itemsLimit</td><td>integer</td><td>The maximum number of items that is returned in a collection page. To request more than the itemsLimit, make subsequent requests using the collection's 'next' or 'prev' link.</td></tr><tr><td>latest</td><td>string</td><td>...</td></tr><tr><td>numBrands</td><td>integer</td><td>...</td></tr><tr><td>pageOf</td><td>string</td><td>The '@id' of the collection to which the current page belongs. In other words, this is the link to the default collection resource without pagination.</td></tr><tr><td>pageOrder</td><td>string</td><td>Either 'asc' or 'desc' based on item id's.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#public-brand'>brand</a></td><td>link</td><td>The currency issuer related to this resource.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#public-brands-add'>add</a></td><td>form</td><td>A form for adding a resource to a collection, or for adding to a resource's tracked quantity.</td></tr></tbody></table>
<h2 id="public-brand">public-brand</h2>
<pre><code class="language-javascript">
api.loadConcept('public-brand');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>[
    {
        "brand_id": 104,
        "name": "abc",
        "description": "for testing",
        "created": "2015-01-05 11:53:31",
        "updated": null,
        "ended": null,
        "url": null,
        "advisor": "http://tatag.dev/api/advisor.php/{?brand_id,revBudget,expBudget,inflow,outflow,numMembers,totalMemberHours}",
        "type_system": "for-profit",
        "type_id": 9,
        "country_code": "USA",
        "area_code": 206,
        "@id": "/brand/104/about"
    }
]</code></pre>
<p>A registered team that issues its own currency. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>advisor</td><td>string</td><td>...</td></tr><tr><td>area_code</td><td>integer</td><td>The phone area code where a brand is located. (optional, self-reported)</td></tr><tr><td>brand_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td>country_code</td><td>string</td><td>The ISO3 code of a brand location.</td></tr><tr><td>created</td><td>string</td><td>The date and time when a resource was created, in the form of `YYYY-MM-DD hh:mm:ss`.</td></tr><tr><td>description</td><td>string</td><td>...</td></tr><tr><td>ended</td><td>NULL</td><td>The date of resource or relation deactivation, formatted as `YYYY-MM-DD hh:mm:ss`.</td></tr><tr><td>name</td><td>string</td><td>The name of the resource.</td></tr><tr><td>type_id</td><td>integer</td><td>A brand's self-reported classification.</td></tr><tr><td>type_system</td><td>string</td><td>The classification system that is used to determine the brand type_id value.</td></tr><tr><td>updated</td><td>NULL</td><td>The UNIX timestamp when a resource was last updated.</td></tr><tr><td>url</td><td>NULL</td><td>A link to a web page or image, typically not considered as an API data and therefore not expected to be dereferenced as part of the payload but instead opened as an external link or used in HTML representations.</td></tr></tbody></table>
<h2 id="public-promos">public-promos</h2>
<pre><code class="language-javascript">
api.loadConcept('public-promos');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "pageOrder": "desc",
    "itemsLimit": 50,
    "collectionOf": "promo",
    "pageOf": "/promo/collection",
    "@type": "promoCollection",
    "@id": "/promo/collection",
    "promo": [
        {
            "promo_id": 11,
            "name": "finallyu",
            "description": "yes",
            "amount": 1.11,
            "imageURL": "",
            "infoURL": null,
            "created": "2015-11-18 10:36:58",
            "updated": null,
            "expires": "2016-12-31 00:00:00",
            "keyword": "ad",
            "by_all_limit": 25,
            "by_brand_limit": 5,
            "by_user_limit": 2,
            "by_user_wait": 24,
            "id": 11,
            "@id": "/promo/11",
            "@type": "promo",
            "brand": "/brand/104/about",
            "promoPage": "http://tatag.dev/ad/11",
            "code": "ad-11",
            "payURL": "http://tatag.dev/for/ad-11",
            "imageTemplate": "/ui/logo.php"
        },
        {
            "promo_id": 10,
            "name": "mmm",
            "description": "nnn",
            "amount": 2.22,
            "imageURL": "",
            "infoURL": null,
            "created": "2015-11-18 10:15:31",
            "updated": null,
            "expires": "2016-12-31 00:00:00",
            "keyword": "ad",
            "by_all_limit": 25,
            "by_brand_limit": 5,
            "by_user_limit": 2,
            "by_user_wait": 24,
            "id": 10,
            "@id": "/promo/10",
            "@type": "promo",
            "brand": "/brand/104/about",
            "promoPage": "http://tatag.dev/ad/10",
            "code": "ad-10",
            "payURL": "http://tatag.dev/for/ad-10",
            "imageTemplate": "/ui/logo.php"
        },
        {
            "promo_id": 9,
            "name": "raisins",
            "description": "test",
            "amount": 3.33,
            "imageURL": "",
            "infoURL": null,
            "created": "2015-11-18 10:14:48",
            "updated": null,
            "expires": "2016-12-31 00:00:00",
            "keyword": "ad",
            "by_all_limit": 25,
            "by_brand_limit": 5,
            "by_user_limit": 2,
            "by_user_wait": 24,
            "id": 9,
            "@id": "/promo/9",
            "@type": "promo",
            "brand": "/brand/104/about",
            "promoPage": "http://tatag.dev/ad/9",
            "code": "ad-9",
            "payURL": "http://tatag.dev/for/ad-9",
            "imageTemplate": "/ui/logo.php"
        }
    ],
    "search": "/form/promo-search"
}</code></pre>
<p>A collection or paged list of public-promo. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>collectionOf</td><td>string</td><td>The term used for the collection item. For example, instead of promos.items, you could use promos.promo or promos[promos.collectionOf].</td></tr><tr><td>itemsLimit</td><td>integer</td><td>The maximum number of items that is returned in a collection page. To request more than the itemsLimit, make subsequent requests using the collection's 'next' or 'prev' link.</td></tr><tr><td>pageOf</td><td>string</td><td>The '@id' of the collection to which the current page belongs. In other words, this is the link to the default collection resource without pagination.</td></tr><tr><td>pageOrder</td><td>string</td><td>Either 'asc' or 'desc' based on item id's.</td></tr><tr><td>search</td><td>string</td><td>...</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#public-promo'>promo</a></td><td>link</td><td>A brand promotion, used to advertise anything that could be the target of a payment.</td></tr></tbody></table>
<h2 id="public-promo">public-promo</h2>
<pre><code class="language-javascript">
api.loadConcept('public-promo');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>[
    {
        "promo_id": 11,
        "name": "finallyu",
        "description": "yes",
        "amount": 1.11,
        "imageURL": "",
        "infoURL": null,
        "created": "2015-11-18 10:36:58",
        "updated": null,
        "expires": "2016-12-31 00:00:00",
        "keyword": "ad",
        "by_all_limit": 25,
        "by_brand_limit": 5,
        "by_user_limit": 2,
        "by_user_wait": 24,
        "id": 11,
        "@id": "/promo/11",
        "@type": "promo",
        "brand": "/brand/104/about",
        "promoPage": "http://tatag.dev/ad/11",
        "code": "ad-11",
        "payURL": "http://tatag.dev/for/ad-11",
        "imageTemplate": "/ui/logo.php"
    }
]</code></pre>
<p>Anything that a participant could pay for, such as for purchasing products, funding nonprofit campaigns, or supporting team projects with donations. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>amount</td><td>double</td><td>A numeric value that quantifies an important aspect of a resource. For example, in the context of a promo or transaction record, the amount may be a product price or a suggested donation amount.</td></tr><tr><td>by_all_limit</td><td>integer</td><td>This is a weekly limit on the total inflow transaction amount for a given account or usage for a given product, regardless of the payor's brand or user id. This is similar to coupon restrictions, allowing your brand to set limits on transactions and also to combat spammy payment offers. </td></tr><tr><td>by_brand_limit</td><td>integer</td><td>A weekly limit on total inflow transaction amount for a given account or usage for a given promo, based on the payor's brand id. This is similar to coupon restrictions, allowing your brand to set limits on transactions and also to combat spammy payment offers. </td></tr><tr><td>by_user_limit</td><td>integer</td><td>A weekly limit on total inflow transaction amount for a given account or usage for a given promo, based on the payor's user id. This is similar to coupon restrictions, allowing your brand to set limits on transactions and also to combat spammy payment offers. </td></tr><tr><td>by_user_wait</td><td>integer</td><td>How long a user must wait after using a promo, before that user can reuse the same promo.</td></tr><tr><td>code</td><td>string</td><td>An alpha-numeric string that a payment recipient shares with a payor to authorize a payment or promo use.</td></tr><tr><td>created</td><td>string</td><td>The date and time when a resource was created, in the form of `YYYY-MM-DD hh:mm:ss`.</td></tr><tr><td>description</td><td>string</td><td>...</td></tr><tr><td>expires</td><td>string</td><td>The date after which a given resource will no longer be available. For example, a promo may expire after a week.</td></tr><tr><td>id</td><td>integer</td><td>A numeric identifier for a resource, that is unique for a given resource type.</td></tr><tr><td>imageTemplate</td><td>string</td><td>If given, a user interface provider may use this resource to display a brand icon or promo image.</td></tr><tr><td>imageURL</td><td>string</td><td>If given, a user interface provider may use this link to display a brand icon or promo image.</td></tr><tr><td>infoURL</td><td>NULL</td><td>External web page about a resource.</td></tr><tr><td>keyword</td><td>string</td><td>In the context of a relay, this is the prefix to be used with a relay id, such as the 'food-' in the relay token value of 'food-645'. This keyword is assigned by the user when creating a promo, and also helps to counter (but not prevent) spammy transaction offers by making it harder to guess the full value of a relay token.</td></tr><tr><td>name</td><td>string</td><td>The name of the resource.</td></tr><tr><td>payURL</td><td>string</td><td>A URL that, when clicked, is intended to automatically open the tatag.cc wallet of a payor.</td></tr><tr><td>promoPage</td><td>string</td><td>The tatag.cc-hosted web page about the promo. An infoURL, when available, should be preferred as an external link.</td></tr><tr><td>promo_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td>updated</td><td>NULL</td><td>The UNIX timestamp when a resource was last updated.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#public-brand'>brand</a></td><td>link</td><td>The currency issuer related to this resource.</td></tr></tbody></table>
<h1 id="personal-resources">Personal Resources</h1>
<p>These are resources that belong to the current user and are meant for private viewing. </p>
<h2 id="my-me">my-me</h2>
<pre><code class="language-javascript">
api.loadConcept('my-me');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "@id": "/user/21",
    "@type": "user",
    "user_id": 21,
    "memberships": "/user/21/memberships",
    "holdings": "/user/21/accounts",
    "ratings": "/user/21/ratings",
    "about": "/user/21/about",
    "name": "User One",
    "login_provider": "gp",
    "teams": "/user/21/teams",
    "issuers": "/user/21/brands",
    "promoSearch": "/form/promo-search",
    "id": 21
}</code></pre>
<p>The currently logged-in user. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>id</td><td>integer</td><td>A numeric identifier for a resource, that is unique for a given resource type.</td></tr><tr><td>login_provider</td><td>string</td><td>The identity provider for the currently logged-in user, usually an OpenId provider.</td></tr><tr><td>name</td><td>string</td><td>The name of the resource.</td></tr><tr><td>promoSearch</td><td>string</td><td>...</td></tr><tr><td>user_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#my-about'>about</a></td><td>link</td><td>Information about the current resource.</td></tr><tr><td><a href='#my-holdings'>holdings</a></td><td>link</td><td>A collection of accountholdings.</td></tr><tr><td><a href='#my-issuers'>issuers</a></td><td>link</td><td>A collection of brand-resources to which a user has a member role of admin.</td></tr><tr><td><a href='#my-memberships'>memberships</a></td><td>link</td><td>A collection of team membership information for a user.</td></tr><tr><td><a href='#my-ratings'>ratings</a></td><td>link</td><td>A collection of 'rating'.</td></tr><tr><td><a href='#my-teams'>teams</a></td><td>link</td><td>A collection of brand-resources to which a user belongs as a member.</td></tr></tbody></table>
<h2 id="my-memberships">my-memberships</h2>
<pre><code class="language-javascript">
api.loadConcept('my-memberships');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "@type": "userMemberships",
    "user_id": 21,
    "@id": "/user/21/memberships",
    "collectionOf": "memberships",
    "membership": [
        "/user/21/memberships?member_id=53"
    ]
}</code></pre>
<p>The current user's collection of membership information. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>collectionOf</td><td>string</td><td>The term used for the collection item. For example, instead of promos.items, you could use promos.promo or promos[promos.collectionOf].</td></tr><tr><td>user_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#my-membership'>membership</a></td><td>link</td><td>Team membership information for a user.</td></tr></tbody></table>
<h2 id="my-membership">my-membership</h2>
<pre><code class="language-javascript">
api.loadConcept('my-membership');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>[
    {
        "id": 53,
        "joined": "2015-11-17 04:15:14",
        "role": "admin",
        "hours": 0,
        "team": "/team/104",
        "issuer": "/brand/104",
        "@type": "userMembership",
        "@id": "/user/21/memberships?member_id=53",
        "edit": "/form/member-edit",
        "revoke": "/form/member-revoke"
    }
]</code></pre>
<p>The current user's membership information. A user may belong to one or more brands. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>hours</td><td>integer</td><td>The number of hours per week that a member spends towards contributing to the team goals.</td></tr><tr><td>id</td><td>integer</td><td>A numeric identifier for a resource, that is unique for a given resource type.</td></tr><tr><td>joined</td><td>string</td><td>The date when a user joined a team.</td></tr><tr><td>role</td><td>string</td><td>A user's role within the given context, such as a team member role.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#my-issuer'>issuer</a></td><td>link</td><td>When given as part of a resource, this links to an admin view of the related brand resource.</td></tr><tr><td><a href='#my-team'>team</a></td><td>link</td><td>When given as part of a resource, this links to a member view of the related brand resource.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#my-membership-accept'>accept</a></td><td>form</td><td>A form for accepting an offer, such as a membership offer where acceptance is indicated by the 'joined' date.</td></tr><tr><td><a href='#my-membership-edit'>edit</a></td><td>form</td><td>A form for updating a resource.</td></tr><tr><td><a href='#my-membership-revoke'>revoke</a></td><td>form</td><td>A form for revoking a current relation between resources, such as user membership in a team.</td></tr></tbody></table>
<h3 id="my-membership-accept">my-membership-accept</h3>
<pre><code class="language-javascript">
api.loadId(currResource['accept']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Accept membership",
    "@type": "form",
    "@id": "/form/member-accept",
    "method": "POST",
    "inputs": {
        "required": [
            "joined"
        ],
        "optional": [

        ]
    }
}</code></pre>
<p>Accept membership</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>["joined"]</td></tr><tr><td>inputs optional</td><td>[]</td></tr></tbody></table>
<h4 id="my-membership-accept-0">my-membership-accept-0</h4>
<pre><code>var currResource = {
    "@id": "/user/21/memberships?member_id=53"
};

api.submit(currResource, 'accept', {
    "joined": "{date}"
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow a member to accept membership by providing a joined date</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "joined": "2016-01-21 00:00:00"
}</code></pre>
<h3 id="my-membership-revoke">my-membership-revoke</h3>
<pre><code class="language-javascript">
api.loadId(currResource['revoke']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Revoke Membership",
    "@type": "form",
    "@id": "/form/member-revoke",
    "method": "POST",
    "inputs": {
        "required": [
            "revoked"
        ],
        "optional": [

        ]
    }
}</code></pre>
<p>Revoke Membership</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>["revoked"]</td></tr><tr><td>inputs optional</td><td>[]</td></tr></tbody></table>
<h2 id="my-team">my-team</h2>
<pre><code class="language-javascript">
api.loadConcept('my-team');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "id": 104,
    "name": "abc",
    "logo": null,
    "@id": "/team/104",
    "@type": "brand",
    "members": "/team/104/members",
    "accounts": "/team/104/accounts",
    "throttles": "/team/104/throttles",
    "records": "/budget/104/records",
    "about": "/brand/104/about",
    "promos": "/brand/104/promos",
    "tally": "/brand/104/tally",
    "edit": "/form/brand-edit"
}</code></pre>
<p>blah blah blah </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>id</td><td>integer</td><td>A numeric identifier for a resource, that is unique for a given resource type.</td></tr><tr><td>logo</td><td>NULL</td><td>An external link to an icon image that symbolizes a brand.</td></tr><tr><td>name</td><td>string</td><td>The name of the resource.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#my-about'>about</a></td><td>link</td><td>Information about the current resource.</td></tr><tr><td>accounts</td><td>link</td><td>A collection of brand accounts, that is, a brand's ledger.</td></tr><tr><td>members</td><td>link</td><td>A collection of brand members.</td></tr><tr><td>promos</td><td>link</td><td>A collection of brand promotions.</td></tr><tr><td>records</td><td>link</td><td>A collection of 'record'.</td></tr><tr><td>tally</td><td>link</td><td>Periodic aggregated budget activity information, by brand and type of activity.</td></tr><tr><td>throttles</td><td>link</td><td>A collection of 'throttle'.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#my-team-edit'>edit</a></td><td>form</td><td>A form for updating a resource.</td></tr></tbody></table>
<h2 id="my-issuer">my-issuer</h2>
<pre><code class="language-javascript">
api.loadConcept('my-issuer');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "id": 104,
    "@type": "brand",
    "@id": "/brand/104",
    "role": "admin",
    "name": "abc",
    "brand_name": "abc",
    "members": "/brand/104/members",
    "accounts": "/brand/104/accounts",
    "about": "/brand/104/about",
    "promos": "/brand/104/promos",
    "records": "/budget/104/records",
    "throttles": "/budget/104/throttles",
    "tally": {
        "@type": "budgetTally",
        "added": 1500.11,
        "intrause": 90.76,
        "inflow": 9.37,
        "outflow": 0,
        "revBudget": 1399.98,
        "expBudget": 1409.35,
        "numMembers": 2,
        "totalMemberHours": 0
    },
    "edit": "/form/brand-edit"
}</code></pre>
<p>blah blah blah </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>brand_name</td><td>string</td><td>(deprecated) The name of the related brand. Use the (sub)resource 'name' instead.</td></tr><tr><td>id</td><td>integer</td><td>A numeric identifier for a resource, that is unique for a given resource type.</td></tr><tr><td>name</td><td>string</td><td>The name of the resource.</td></tr><tr><td>role</td><td>string</td><td>A user's role within the given context, such as a team member role.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#my-about'>about</a></td><td>link</td><td>Information about the current resource.</td></tr><tr><td>accounts</td><td>link</td><td>A collection of brand accounts, that is, a brand's ledger.</td></tr><tr><td>members</td><td>link</td><td>A collection of brand members.</td></tr><tr><td>promos</td><td>link</td><td>A collection of brand promotions.</td></tr><tr><td>records</td><td>link</td><td>A collection of 'record'.</td></tr><tr><td>tally</td><td>link</td><td>Periodic aggregated budget activity information, by brand and type of activity.</td></tr><tr><td>throttles</td><td>link</td><td>A collection of 'throttle'.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#my-issuer-edit'>edit</a></td><td>form</td><td>A form for updating a resource.</td></tr></tbody></table>
<h2 id="my-holdings">my-holdings</h2>
<pre><code class="language-javascript">
api.loadConcept('my-holdings');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "@type": "userAccounts",
    "user_id": 21,
    "@id": "/user/21/accounts",
    "collectionOf": "holding",
    "edit": "/form/holder-edit",
    "holding": [
        "/user/21/accounts?holder_id=41",
        "/user/21/accounts?holder_id=42",
        "/user/21/accounts?holder_id=43"
    ]
}</code></pre>
<p>The current user's collection of accountholdings. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>collectionOf</td><td>string</td><td>The term used for the collection item. For example, instead of promos.items, you could use promos.promo or promos[promos.collectionOf].</td></tr><tr><td>user_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#my-holding'>holding</a></td><td>link</td><td>An accountholding.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#my-holdings-edit'>edit</a></td><td>form</td><td>A form for updating a resource.</td></tr></tbody></table>
<h2 id="my-holding">my-holding</h2>
<pre><code class="language-javascript">
api.loadConcept('my-holding');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>[
    {
        "id": 41,
        "alias": "Main Revenue",
        "limkey": "abc",
        "authcode": "cftix",
        "account": "/account/92",
        "user": "/user/21",
        "relay": {
            "default": "41-abc",
            "transfer": "41-abc-t",
            "use": "41-abc-ix"
        },
        "@type": "userAccount",
        "@id": "/user/21/accounts?holder_id=41",
        "add": "/form/budget-add",
        "transfer": "/form/budget-transfer",
        "edit": "/form/holder-edit",
        "relays": "/holder/41/relays"
    }
]</code></pre>
<p>The current user's accountholdings. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>alias</td><td>string</td><td>An alternate name for a resource. For example, an accountholder may assign an alias to the holding instead of referring to it by the account name.</td></tr><tr><td>authcode</td><td>string</td><td>The permissions related to a resource. In the case of an account or an accountholding, the authcode encodes which transaction activities are allowed based on the intersecting values between account.authcode and holder.authcode. The presence of the following characters in the authcode signify the corresponding permission: 'c' to add budget, 'f' to act as a budget transfer originator, 't' to act as a buget transfer recipient, 'i' for internal budget use within a brand, 'x' for external budget use between brands.</td></tr><tr><td>id</td><td>integer</td><td>A numeric identifier for a resource, that is unique for a given resource type.</td></tr><tr><td>limkey</td><td>string</td><td>Short for 'limited key', this is a semi-secret string that an accountholder shares as part of a token to pre-authorize a payment. The token is usually in the format 'holder.id-limkey'.</td></tr><tr><td>user</td><td>string</td><td>A person-resource.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#my-account'>account</a></td><td>link</td><td>A brand account. An account with a sign=-1 is a revenue budget that holds debits, with a normal balance of <= 0, to be used for receiving payments. An account with a sign=1 is an expense budget that holds credits, with a normal balance >=0, to be used as payment.</td></tr><tr><td><a href='#my-relay'>relay</a></td><td>link</td><td>A token that is used to preauthorize the use of a recipient account.</td></tr><tr><td><a href='#my-relays'>relays</a></td><td>link</td><td>A collection of relay tokens.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#my-holding-add'>add</a></td><td>form</td><td>A form for adding a resource to a collection, or for adding to a resource's tracked quantity.</td></tr><tr><td><a href='#my-holding-edit'>edit</a></td><td>form</td><td>A form for updating a resource.</td></tr><tr><td><a href='#my-holding-transfer'>transfer</a></td><td>form</td><td>A form for transferring a resource between collections, or for transferring tracked quantities between resources.</td></tr><tr><td><a href='#my-holding-use'>use</a></td><td>form</td><td>A form for using a resource or its tracked quantity.</td></tr></tbody></table>
<h3 id="my-holding-edit">my-holding-edit</h3>
<pre><code class="language-javascript">
api.loadId(currResource['edit']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Edit",
    "@type": "form",
    "@id": "/form/holder-edit",
    "method": "POST",
    "inputs": {
        "required": [

        ],
        "optional": [
            "alias",
            "limkey"
        ]
    }
}</code></pre>
<p>Edit</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>[]</td></tr><tr><td>inputs optional</td><td>["alias","limkey"]</td></tr></tbody></table>
<h4 id="my-holding-edit-0">my-holding-edit-0</h4>
<pre><code>var currResource = {
    "@id": "/user/21/accounts?holder_id=41"
};

api.submit(currResource, 'edit', {
    "alias": "nickname-{xtime}"
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow a holder to edit the accountholding's alias</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "alias": "nickname-1453363549"
}</code></pre>
<h4 id="my-holding-edit-1">my-holding-edit-1</h4>
<pre><code>var currResource = {
    "@id": "/user/21/accounts?holder_id=44"
};

api.submit(currResource, 'edit', {
    "alias": "nickname-{xtime}"
}, successFxn, errorFxn);</code></pre>
<p>Example: should NOT allow a non-holder to edit an account's alias</p>
<blockquote>
<p>Status <span style='color:#f00'>403</span></p>
</blockquote>
<pre><code>{
    "@context": "/api/ref/context.php",
    "error": "The requester cannot set another holder's information. \n\t\t\t\tPlease check that requester (#21) is filtering by his or her own holder_id (#44).",
    "hints": [

    ],
    "@graph": [

    ],
    "requestURI": "/user/21/accounts?holder_id=44"
}</code></pre>
<h3 id="my-holding-add">my-holding-add</h3>
<pre><code class="language-javascript">
api.loadId(currResource['add']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Issue budget",
    "@type": "form",
    "@id": "/form/budget-add",
    "method": "POST",
    "target": "/budget/issued",
    "query": {
        "required": [
            "account-brand-id"
        ],
        "optional": [

        ]
    },
    "inputs": {
        "required": [
            "from",
            "to",
            "amount",
            "note"
        ],
        "optional": [

        ]
    }
}</code></pre>
<p>Issue budget</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>["from","to","amount","note"]</td></tr><tr><td>inputs optional</td><td>[]</td></tr></tbody></table>
<h4 id="my-holding-add-0">my-holding-add-0</h4>
<pre><code>var currResource = {
    "account": {
        "brand": {
            "id": 104
        }
    }
};

api.submit(currResource, 'add', {
    "from": "41-abc",
    "to": "42-abc",
    "amount": 200,
    "note": "test budget issuance"
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow an accountholding with a 'c' authcode to issue budget</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "@type": "budgetIssued",
    "brand_id": 104,
    "@id": "/budgets/104/issued",
    "amount": 200,
    "note": "test budget issuance",
    "from_acct": 92,
    "from_user": 21,
    "txntype": "np",
    "record_id": 38,
    "status": 7
}</code></pre>
<h4 id="my-holding-add-1">my-holding-add-1</h4>
<pre><code>var currResource = {
    "account": {
        "brand": {
            "id": 104
        }
    }
};

api.submit(currResource, 'add', {
    "from": "41-abc",
    "to": "43-abc",
    "amount": 200,
    "note": "test budget issuance"
}, successFxn, errorFxn);</code></pre>
<p>Example: should NOT allow an accountholding without a 'c' authcode to issue budget</p>
<blockquote>
<p>Status <span style='color:#f00'>403</span></p>
</blockquote>
<pre><code>{
    "@context": "/api/ref/context.php",
    "error": " The to-account #94 is not authorized for budget creation. The to-acct-holder is not authorized to create budgets using account #94.",
    "hints": [

    ],
    "@graph": [

    ],
    "requestURI": "/budget/issued?account-brand-id=104"
}</code></pre>
<h3 id="my-holding-transfer">my-holding-transfer</h3>
<pre><code class="language-javascript">
api.loadId(currResource['transfer']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Transfer budget",
    "@type": "form",
    "@id": "/form/budget-transfer",
    "method": "POST",
    "target": "/budget/transferred",
    "query": {
        "required": [
            "account-brand-id"
        ],
        "optional": [

        ]
    },
    "inputs": {
        "required": [
            "from",
            "to",
            "amount",
            "note"
        ],
        "optional": [

        ]
    }
}</code></pre>
<p>Transfer budget</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>["from","to","amount","note"]</td></tr><tr><td>inputs optional</td><td>[]</td></tr></tbody></table>
<h4 id="my-holding-transfer-0">my-holding-transfer-0</h4>
<pre><code>var currResource = {
    "account": {
        "brand": {
            "id": 104
        }
    }
};

api.submit(currResource, 'transfer', {
    "from": "42-abc",
    "to": "43-abc",
    "amount": 22,
    "note": "test budget transfer"
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow an originating accountholding with an 'f' and destination accountholding with a 't' authcode to transfer budgets.</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "@type": "budgetTransferred",
    "brand_id": 104,
    "@id": "/budgets/104/transferred",
    "amount": 22,
    "note": "test budget transfer",
    "from_acct": 93,
    "from_user": 21,
    "txntype": "pp",
    "record_id": 39,
    "status": 7
}</code></pre>
<h3 id="my-holding-use">my-holding-use</h3>
<pre><code class="language-javascript">
api.loadId(currResource['use']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Use budget",
    "@type": "form",
    "@id": "/form/budget-use",
    "method": "POST",
    "target": "/budget/used",
    "query": {
        "required": [
            "account-brand-id"
        ],
        "optional": [

        ]
    },
    "inputs": {
        "required": [
            "from",
            "to",
            "amount",
            "note"
        ],
        "optional": [

        ]
    }
}</code></pre>
<p>Use budget</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>["from","to","amount","note"]</td></tr><tr><td>inputs optional</td><td>[]</td></tr></tbody></table>
<h4 id="my-holding-use-0">my-holding-use-0</h4>
<pre><code>var currResource = {
    "account": {
        "brand": {
            "id": 104
        }
    }
};

api.submit(currResource, 'use', {
    "from": "42-abc",
    "to": "44-abc",
    "amount": 11.11,
    "note": "test budget use"
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow an accountholding with an 'x' to use budgets.</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "@type": "budgetUsed",
    "brand_id": 104,
    "@id": "/budgets/104/used",
    "amount": 11.11,
    "note": "test budget use",
    "from_acct": 93,
    "from_user": 21,
    "txntype": "pn",
    "throttle_id": 0,
    "relay_id": 0,
    "promo_id": 0,
    "record_id": 40
}</code></pre>
<h4 id="my-holding-use-1">my-holding-use-1</h4>
<pre><code>var currResource = {
    "account": {
        "brand": {
            "id": 104
        }
    }
};

api.submit(currResource, 'use', {
    "from": "42-abc",
    "to": "3.xyz",
    "amount": 1.11,
    "note": "test budget use"
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow the use of a valid relay credential to authorize a transaction.</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "@type": "budgetUsed",
    "brand_id": 104,
    "@id": "/budgets/104/used",
    "amount": 1.11,
    "note": "test budget use",
    "from_acct": 93,
    "from_user": 21,
    "txntype": "pn",
    "throttle_id": 0,
    "relay_id": 3,
    "promo_id": 0,
    "record_id": 41
}</code></pre>
<h4 id="my-holding-use-2">my-holding-use-2</h4>
<pre><code>var currResource = {
    "account": {
        "brand": {
            "id": 104
        }
    }
};

api.submit(currResource, 'use', {
    "from": "42-abc",
    "to": "3.xyz",
    "amount": 51.11,
    "note": "test budget use"
}, successFxn, errorFxn);</code></pre>
<p>Example: should void the transaction when the transaction amount is not within a relay's amount_min and _max</p>
<blockquote>
<p>Status <span style='color:#f00'>403</span></p>
</blockquote>
<pre><code>{
    "@context": "/api/ref/context.php",
    "error": "The amount must be between 0.01 and 50.00.",
    "hints": [

    ],
    "@graph": [

    ],
    "requestURI": "/budget/used?account-brand-id=104"
}</code></pre>
<h4 id="my-holding-use-3">my-holding-use-3</h4>
<pre><code>var currResource = {
    "account": {
        "brand": {
            "id": 104
        }
    }
};

api.submit(currResource, 'use', {
    "from": "42-abc",
    "to": "3.xyz",
    "note": "test budget use"
}, successFxn, errorFxn);</code></pre>
<p>Example: should fill-in missing transaction amount</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "@type": "budgetUsed",
    "brand_id": 104,
    "@id": "/budgets/104/used",
    "note": "test budget use",
    "from_acct": 93,
    "from_user": 21,
    "amount": 0.01,
    "txntype": "pn",
    "throttle_id": 0,
    "relay_id": 3,
    "promo_id": 0,
    "record_id": 42
}</code></pre>
<h4 id="my-holding-use-4">my-holding-use-4</h4>
<pre><code>var currResource = {
    "account": {
        "brand": {
            "id": 104
        }
    }
};

api.submit(currResource, 'use', {
    "from": "42-abc",
    "to": "4.qrs",
    "amount": 0.12,
    "note": "test budget use"
}, successFxn, errorFxn);</code></pre>
<p>Example: should not allow relay usage that exceeds limits</p>
<blockquote>
<p>Status <span style='color:#f00'>403</span></p>
</blockquote>
<pre><code>{
    "@context": "/api/ref/context.php",
    "error": "The user relay usage limit of 0 within the last seven days has been reached or exceeded (counted 0 uses).",
    "hints": [

    ],
    "@graph": [

    ],
    "requestURI": "/budget/used?account-brand-id=104"
}</code></pre>
<h4 id="my-holding-use-5">my-holding-use-5</h4>
<pre><code>var currResource = {
    "account": {
        "brand": {
            "id": 104
        }
    }
};

api.submit(currResource, 'use', {
    "from": "42-abc",
    "to": "ad-1",
    "note": "test budget use"
}, successFxn, errorFxn);</code></pre>
<p>Example: should convert promo to correct record info</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "@type": "budgetUsed",
    "brand_id": 104,
    "@id": "/budgets/104/used",
    "note": "test budget use",
    "from_acct": 93,
    "from_user": 21,
    "amount": 25,
    "txntype": "pn",
    "throttle_id": 0,
    "relay_id": 1,
    "promo_id": 1,
    "record_id": 43
}</code></pre>
<h2 id="my-account">my-account</h2>
<pre><code class="language-javascript">
api.loadConcept('my-account');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "id": 92,
    "name": "Main Revenue",
    "sign": -1,
    "balance": 1399.98,
    "unit": "hour",
    "authcode": "cftix",
    "@id": "/account/92",
    "@type": "account",
    "records": "/account/92/records",
    "brand": "/team/104",
    "throttle": "/throttle/0"
}</code></pre>
<p>The account referenced in an accountholding. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>authcode</td><td>string</td><td>The permissions related to a resource. In the case of an account or an accountholding, the authcode encodes which transaction activities are allowed based on the intersecting values between account.authcode and holder.authcode. The presence of the following characters in the authcode signify the corresponding permission: 'c' to add budget, 'f' to act as a budget transfer originator, 't' to act as a buget transfer recipient, 'i' for internal budget use within a brand, 'x' for external budget use between brands.</td></tr><tr><td>balance</td><td>double</td><td>The available amount related to a resource, such as an account balance.</td></tr><tr><td>id</td><td>integer</td><td>A numeric identifier for a resource, that is unique for a given resource type.</td></tr><tr><td>name</td><td>string</td><td>The name of the resource.</td></tr><tr><td>sign</td><td>integer</td><td>Indicates whether an account is a revenue (-1) or expense (+1) budget.</td></tr><tr><td>unit</td><td>string</td><td>The accounting-unit of a budget, also the currency unit. The only possible value right now is XTE.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td>brand</td><td>link</td><td>The currency issuer related to this resource.</td></tr><tr><td><a href='#my-account-records'>records</a></td><td>link</td><td>A collection of 'record'.</td></tr><tr><td>throttle</td><td>link</td><td>A limit on how much an account may be used for transactions for a given period, specified as amount per brand, amount per user, and amount by all.</td></tr></tbody></table>
<h2 id="my-account-records">my-account-records</h2>
<pre><code class="language-javascript">
api.loadConcept('my-account-records');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "pageOrder": "desc",
    "itemsLimit": 50,
    "collectionOf": "record",
    "pageOf": "/account/92/records",
    "account_id": 92,
    "brand_id": 104,
    "holder_id": 41,
    "limkey": "abc",
    "@type": "accountRecords",
    "@id": "/account/92/records",
    "record": [
        "/account/92/records?record_id=64",
        "/account/92/records?record_id=63",
        "/account/92/records?record_id=62"
    ],
    "hold": "/form/record-hold",
    "approve": "/form/record-approve",
    "reject": "/form/record-reject"
}</code></pre>
<p>A collection of account transaction records, most recent first. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>account_id</td><td>integer</td><td>...</td></tr><tr><td>brand_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td>collectionOf</td><td>string</td><td>The term used for the collection item. For example, instead of promos.items, you could use promos.promo or promos[promos.collectionOf].</td></tr><tr><td>holder_id</td><td>integer</td><td>...</td></tr><tr><td>itemsLimit</td><td>integer</td><td>The maximum number of items that is returned in a collection page. To request more than the itemsLimit, make subsequent requests using the collection's 'next' or 'prev' link.</td></tr><tr><td>limkey</td><td>string</td><td>Short for 'limited key', this is a semi-secret string that an accountholder shares as part of a token to pre-authorize a payment. The token is usually in the format 'holder.id-limkey'.</td></tr><tr><td>pageOf</td><td>string</td><td>The '@id' of the collection to which the current page belongs. In other words, this is the link to the default collection resource without pagination.</td></tr><tr><td>pageOrder</td><td>string</td><td>Either 'asc' or 'desc' based on item id's.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td>record</td><td>link</td><td>Tracked information about a resource, usually involving lifecycle events, such as a transaction record.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#my-account-records-approve'>approve</a></td><td>form</td><td>A form for approving the completion of a pending resource action.</td></tr><tr><td><a href='#my-account-records-hold'>hold</a></td><td>form</td><td>A form for preventing the auto-approval or auto-rejection of a pending resource action.</td></tr><tr><td><a href='#my-account-records-reject'>reject</a></td><td>form</td><td>A form for rejecting the completion of a pending resource action.</td></tr></tbody></table>
<h2 id="my-account-record">my-account-record</h2>
<pre><code class="language-javascript">
api.loadConcept('my-account-record');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>[
    {
        "record_id": 64,
        "txntype": "pn",
        "direction": "from",
        "throttle_id": 0,
        "other_acct": 94,
        "brand_id": 104,
        "brand_name": "abc",
        "amount": -1.11,
        "created": "2015-11-21 14:10:38",
        "status": 7,
        "note": "",
        "updated": 1448144507,
        "@type": "accountRecord",
        "@id": "/account/92/records?record_id=64",
        "other": 94
    }
]</code></pre>
<p>An account's transaction record. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>amount</td><td>double</td><td>A numeric value that quantifies an important aspect of a resource. For example, in the context of a promo or transaction record, the amount may be a product price or a suggested donation amount.</td></tr><tr><td>brand_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td>brand_name</td><td>string</td><td>(deprecated) The name of the related brand. Use the (sub)resource 'name' instead.</td></tr><tr><td>created</td><td>string</td><td>The date and time when a resource was created, in the form of `YYYY-MM-DD hh:mm:ss`.</td></tr><tr><td>direction</td><td>string</td><td>(deprecated) The direction in a transaction record signifies whether the accountholder acted as a payment originator ('from') or recipient ('to').</td></tr><tr><td>note</td><td>string</td><td>A short text used to annotate a resource such as a transaction record.</td></tr><tr><td>other</td><td>integer</td><td>The other brand in a transaction record, from the viewpoint of an accountholder.</td></tr><tr><td>other_acct</td><td>integer</td><td>The other account in a transaction record, from the viewpoint of an accountholder.</td></tr><tr><td>record_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td>status</td><td>integer</td><td>An integer associated with the current state of a resource. For example, a transaction record may be pending automated approval (status=0), on hold for manual approval (status=5), approved (status=7), or rejected (status <0).</td></tr><tr><td>throttle_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td>txntype</td><td>string</td><td>The type of budget activity that a transaction record is classified as. There are four possible values: 'np' (budget add), 'nn' (revenue budget transfer), 'pp' (expense budget transfer), and 'pn' (budget use).</td></tr><tr><td>updated</td><td>integer</td><td>The UNIX timestamp when a resource was last updated.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#my-account-record-approve'>approve</a></td><td>form</td><td>A form for approving the completion of a pending resource action.</td></tr><tr><td><a href='#my-account-record-hold'>hold</a></td><td>form</td><td>A form for preventing the auto-approval or auto-rejection of a pending resource action.</td></tr><tr><td><a href='#my-account-record-reject'>reject</a></td><td>form</td><td>A form for rejecting the completion of a pending resource action.</td></tr><tr><td><a href='#my-account-record-unadd'>unadd</a></td><td>form</td><td>A form for reversing a previous approved 'add' action.</td></tr><tr><td><a href='#my-account-record-unuse'>unuse</a></td><td>form</td><td>A form for reversing a previously approved 'use' action.</td></tr></tbody></table>
<h3 id="my-account-record-hold">my-account-record-hold</h3>
<pre><code class="language-javascript">
api.loadId(currResource['hold']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Hold transaction (disable auto-approval)",
    "@type": "form",
    "@id": "/form/record-hold",
    "method": "POST",
    "inputs": {
        "required": [
            "status"
        ],
        "optional": [

        ],
        "valueRestrictions": {
            "status": [
                5
            ]
        }
    }
}</code></pre>
<p>Hold transaction (disable auto-approval)</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>["status"]</td></tr><tr><td>inputs optional</td><td>[]</td></tr></tbody></table>
<h4 id="my-account-record-hold-0">my-account-record-hold-0</h4>
<pre><code>var currResource = {
    "@id": "/account/92/records?record_id=30"
};

api.submit(currResource, 'hold', {
    "status": 5
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow putting record on hold</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "status": 5
}</code></pre>
<h3 id="my-account-record-approve">my-account-record-approve</h3>
<pre><code class="language-javascript">
api.loadId(currResource['approve']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Manually approve transaction",
    "@type": "form",
    "@id": "/form/record-approve",
    "method": "POST",
    "inputs": {
        "required": [
            "status"
        ],
        "optional": [

        ],
        "valueRestrictions": {
            "status": [
                7
            ]
        }
    }
}</code></pre>
<p>Manually approve transaction</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>["status"]</td></tr><tr><td>inputs optional</td><td>[]</td></tr></tbody></table>
<h4 id="my-account-record-approve-0">my-account-record-approve-0</h4>
<pre><code>var currResource = {
    "@id": "/account/92/records?record_id=30"
};

api.submit(currResource, 'approve', {
    "status": 7
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow record approval</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "status": 7
}</code></pre>
<h3 id="my-account-record-reject">my-account-record-reject</h3>
<pre><code class="language-javascript">
api.loadId(currResource['reject']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Manually reject transaction",
    "@type": "form",
    "@id": "/form/record-reject",
    "method": "POST",
    "inputs": {
        "required": [
            "status"
        ],
        "optional": [

        ],
        "valueRestrictions": {
            "status": [
                -10
            ]
        }
    }
}</code></pre>
<p>Manually reject transaction</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>["status"]</td></tr><tr><td>inputs optional</td><td>[]</td></tr></tbody></table>
<h4 id="my-account-record-reject-0">my-account-record-reject-0</h4>
<pre><code>var currResource = {
    "@id": "/account/92/records?record_id=30"
};

api.submit(currResource, 'reject', {
    "status": -10
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow record rejection</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "status": -10
}</code></pre>
<h3 id="my-account-record-unuse">my-account-record-unuse</h3>
<pre><code class="language-javascript">
api.loadId(currResource['unuse']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Reverse used budget",
    "@type": "form",
    "@id": "/form/budget-unuse",
    "method": "POST",
    "target": "/budget/used",
    "query": {
        "required": [
            "account-brand-id"
        ],
        "optional": [

        ]
    },
    "inputs": {
        "required": [
            "from",
            "to",
            "amount",
            "note",
            "orig_record_id"
        ],
        "optional": [

        ]
    }
}</code></pre>
<p>Reverse used budget</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>["from","to","amount","note","orig_record_id"]</td></tr><tr><td>inputs optional</td><td>[]</td></tr></tbody></table>
<h4 id="my-account-record-unuse-0">my-account-record-unuse-0</h4>
<pre><code>var currResource = {
    "account": {
        "brand": {
            "id": 104
        }
    }
};

api.submit(currResource, 'unuse', {
    "from": "45-abc",
    "to": "41-abc",
    "amount": -1.01,
    "note": "test used budget reversal",
    "orig_record_id": 34
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow reversal of used budget</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "@type": "budgetUsed",
    "brand_id": 104,
    "@id": "/budgets/104/used",
    "amount": -1.01,
    "note": "test used budget reversal",
    "from_acct": 96,
    "from_user": 22,
    "txntype": "pn",
    "throttle_id": 0,
    "relay_id": 0,
    "promo_id": 0,
    "record_id": 44,
    "reversal_id": 0
}</code></pre>
<h2 id="my-relays">my-relays</h2>
<pre><code class="language-javascript">
api.loadConcept('my-relays');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "pageOrder": "desc",
    "itemsLimit": 50,
    "collectionOf": "relay",
    "pageOf": "/holder/41/relays",
    "holder_id": 41,
    "@type": "holderRelays",
    "@id": "/holder/41/relays",
    "relay": [
        {
            "id": 1,
            "holder_id": 41,
            "user_id": 21,
            "account_id": 92,
            "amount_min": 0.01,
            "amount_max": 100,
            "redirect": null,
            "secret": null,
            "tag": "test",
            "txntype": "pn",
            "created": "2014-12-31 16:00:00",
            "updated": null,
            "by_all_limit": 25,
            "by_brand_limit": 5,
            "by_user_limit": 25,
            "by_user_wait": 24,
            "token": 1,
            "@id": "/relay/1",
            "@type": "relay",
            "edit": "/form/relay-edit"
        },
        {
            "id": 2,
            "holder_id": 41,
            "user_id": 21,
            "account_id": 92,
            "amount_min": 5,
            "amount_max": 10,
            "redirect": null,
            "secret": null,
            "tag": "test",
            "txntype": "pn",
            "created": "2014-12-31 16:00:00",
            "updated": null,
            "by_all_limit": 25,
            "by_brand_limit": 5,
            "by_user_limit": 25,
            "by_user_wait": 0,
            "token": 2,
            "@id": "/relay/2",
            "@type": "relay",
            "edit": "/form/relay-edit"
        },
        {
            "id": 5,
            "holder_id": 41,
            "user_id": 21,
            "account_id": 92,
            "amount_min": 57.57,
            "amount_max": 57.57,
            "redirect": null,
            "secret": "7d02",
            "tag": null,
            "txntype": "pn",
            "created": "2015-11-17 16:15:57",
            "updated": null,
            "by_all_limit": 25,
            "by_brand_limit": 5,
            "by_user_limit": 2,
            "by_user_wait": 24,
            "token": "5.7d02",
            "@id": "/relay/5",
            "@type": "relay",
            "edit": "/form/relay-edit"
        }
    ],
    "add": "/form/holder-relays-add"
}</code></pre>
<p>blah blah blah </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>collectionOf</td><td>string</td><td>The term used for the collection item. For example, instead of promos.items, you could use promos.promo or promos[promos.collectionOf].</td></tr><tr><td>holder_id</td><td>integer</td><td>...</td></tr><tr><td>itemsLimit</td><td>integer</td><td>The maximum number of items that is returned in a collection page. To request more than the itemsLimit, make subsequent requests using the collection's 'next' or 'prev' link.</td></tr><tr><td>pageOf</td><td>string</td><td>The '@id' of the collection to which the current page belongs. In other words, this is the link to the default collection resource without pagination.</td></tr><tr><td>pageOrder</td><td>string</td><td>Either 'asc' or 'desc' based on item id's.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#my-relay'>relay</a></td><td>link</td><td>A token that is used to preauthorize the use of a recipient account.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#my-relays-add'>add</a></td><td>form</td><td>A form for adding a resource to a collection, or for adding to a resource's tracked quantity.</td></tr></tbody></table>
<h3 id="my-relays-add">my-relays-add</h3>
<pre><code class="language-javascript">
api.loadId(currResource['add']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Add",
    "@type": "form",
    "@id": "/form/holder-relays-add",
    "method": "POST",
    "inputs": {
        "required": [

        ],
        "optional": [
            "amount_min",
            "amount_max",
            "redirect",
            "tag",
            "secret",
            "txntype",
            "ended",
            "by_all_limit",
            "by_brand_limit",
            "by_user_limit",
            "by_user_wait"
        ]
    }
}</code></pre>
<p>Add</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>[]</td></tr><tr><td>inputs optional</td><td>["amount_min","amount_max","redirect","tag","secret","txntype","ended","by_all_limit","by_brand_limit","by_user_limit","by_user_wait"]</td></tr></tbody></table>
<h4 id="my-relays-add-0">my-relays-add-0</h4>
<pre><code>var currResource = {
    "@id": "/holder/41/relays"
};

api.submit(currResource, 'add', {
    "amount_min": 0,
    "amount_max": "{random}"
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow an accountholder to add a relay specification</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "amount_min": 0,
    "amount_max": 155,
    "relay_id": 5
}</code></pre>
<h4 id="my-relays-add-1">my-relays-add-1</h4>
<pre><code>var currResource = {
    "@id": "/holder/44/relays"
};

api.submit(currResource, 'add', {
    "amount_min": 0,
    "amount_max": "{random}"
}, successFxn, errorFxn);</code></pre>
<p>Example: should NOT allow a non-accountholder to add a relay specification</p>
<blockquote>
<p>Status <span style='color:#f00'>403</span></p>
</blockquote>
<pre><code>{
    "@context": "/api/ref/context.php",
    "error": "The user does not have access to this accountholder's information.",
    "hints": [

    ],
    "@graph": [

    ],
    "requestURI": "/holder/44/relays"
}</code></pre>
<h2 id="my-relay">my-relay</h2>
<pre><code class="language-javascript">
api.loadConcept('my-relay');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>[
    {
        "id": 1,
        "holder_id": 41,
        "user_id": 21,
        "account_id": 92,
        "amount_min": 0.01,
        "amount_max": 100,
        "redirect": null,
        "secret": null,
        "tag": "test",
        "txntype": "pn",
        "created": "2014-12-31 16:00:00",
        "updated": null,
        "by_all_limit": 25,
        "by_brand_limit": 5,
        "by_user_limit": 25,
        "by_user_wait": 24,
        "token": 1,
        "@id": "/relay/1",
        "@type": "relay",
        "edit": "/form/relay-edit"
    }
]</code></pre>
<p>blah blah blah </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>account_id</td><td>integer</td><td>...</td></tr><tr><td>amount_max</td><td>integer</td><td>...</td></tr><tr><td>amount_min</td><td>double</td><td>...</td></tr><tr><td>by_all_limit</td><td>integer</td><td>This is a weekly limit on the total inflow transaction amount for a given account or usage for a given product, regardless of the payor's brand or user id. This is similar to coupon restrictions, allowing your brand to set limits on transactions and also to combat spammy payment offers. </td></tr><tr><td>by_brand_limit</td><td>integer</td><td>A weekly limit on total inflow transaction amount for a given account or usage for a given promo, based on the payor's brand id. This is similar to coupon restrictions, allowing your brand to set limits on transactions and also to combat spammy payment offers. </td></tr><tr><td>by_user_limit</td><td>integer</td><td>A weekly limit on total inflow transaction amount for a given account or usage for a given promo, based on the payor's user id. This is similar to coupon restrictions, allowing your brand to set limits on transactions and also to combat spammy payment offers. </td></tr><tr><td>by_user_wait</td><td>integer</td><td>How long a user must wait after using a promo, before that user can reuse the same promo.</td></tr><tr><td>created</td><td>string</td><td>The date and time when a resource was created, in the form of `YYYY-MM-DD hh:mm:ss`.</td></tr><tr><td>holder_id</td><td>integer</td><td>...</td></tr><tr><td>id</td><td>integer</td><td>A numeric identifier for a resource, that is unique for a given resource type.</td></tr><tr><td>redirect</td><td>NULL</td><td>...</td></tr><tr><td>secret</td><td>NULL</td><td>...</td></tr><tr><td>tag</td><td>string</td><td>...</td></tr><tr><td>token</td><td>integer</td><td>...</td></tr><tr><td>txntype</td><td>string</td><td>The type of budget activity that a transaction record is classified as. There are four possible values: 'np' (budget add), 'nn' (revenue budget transfer), 'pp' (expense budget transfer), and 'pn' (budget use).</td></tr><tr><td>updated</td><td>NULL</td><td>The UNIX timestamp when a resource was last updated.</td></tr><tr><td>user_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#my-relay-edit'>edit</a></td><td>form</td><td>A form for updating a resource.</td></tr></tbody></table>
<h3 id="my-relay-edit">my-relay-edit</h3>
<pre><code class="language-javascript">
api.loadId(currResource['edit']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Edit",
    "@type": "form",
    "@id": "/form/relay-edit",
    "method": "POST",
    "inputs": {
        "required": [

        ],
        "optional": [
            "amount_min",
            "amount_max",
            "redirect",
            "tag",
            "secret",
            "txntype",
            "ended",
            "by_all_limit",
            "by_brand_limit",
            "by_user_limit",
            "by_user_wait"
        ]
    }
}</code></pre>
<p>Edit</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>[]</td></tr><tr><td>inputs optional</td><td>["amount_min","amount_max","redirect","tag","secret","txntype","ended","by_all_limit","by_brand_limit","by_user_limit","by_user_wait"]</td></tr></tbody></table>
<h4 id="my-relay-edit-0">my-relay-edit-0</h4>
<pre><code>var currResource = {
    "@id": "/relay/1"
};

api.submit(currResource, 'edit', {
    "secret": "{hex}",
    "amount_max": "{random}"
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow an accountholder to edit a relay specification</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "secret": "{hex}",
    "amount_max": 452
}</code></pre>
<h4 id="my-relay-edit-1">my-relay-edit-1</h4>
<pre><code>var currResource = {
    "@id": "/relay/3"
};

api.submit(currResource, 'edit', {
    "secret": "{hex}",
    "amount_max": "{random}"
}, successFxn, errorFxn);</code></pre>
<p>Example: should NOT allow a non-accountholder to edit a relay specification</p>
<blockquote>
<p>Status <span style='color:#f00'>403</span></p>
</blockquote>
<pre><code>{
    "@context": "/api/ref/context.php",
    "error": "The user does not have access to this accountholder's information.",
    "hints": [

    ],
    "@graph": [

    ],
    "requestURI": "/relay/3"
}</code></pre>
<h2 id="my-ratings">my-ratings</h2>
<pre><code class="language-javascript">
api.loadConcept('my-ratings');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "pageOrder": "desc",
    "itemsLimit": 50,
    "collectionOf": "rating",
    "pageOf": "/user/21/ratings",
    "user_id": 21,
    "@type": "userRatings",
    "@id": "/user/21/ratings",
    "add": "/form/rating-add",
    "rating": [
        {
            "rating_id": 11,
            "brand_id": 116,
            "brand_name": "~Pizza Hut, Washington 99, Edmonds, WA, United States",
            "score": 64,
            "reason": "--social responsibility",
            "created": "2015-11-18 20:21:32",
            "ended": null,
            "@id": "/user/21/ratings?rating_id=11",
            "edit": "/form/rating-edit"
        },
        {
            "rating_id": 10,
            "brand_id": 115,
            "brand_name": "~Echo Lake Elementary School, Seattle, WA, United States",
            "score": 100,
            "reason": "++good school;",
            "created": "2015-11-18 10:50:05",
            "ended": null,
            "@id": "/user/21/ratings?rating_id=10",
            "edit": "/form/rating-edit"
        },
        {
            "rating_id": 9,
            "brand_id": 114,
            "brand_name": "~P-Patch, Lynn Street, Seattle, WA, United States",
            "score": 100,
            "reason": "++environmental impact; ++community health",
            "created": "2015-08-08 18:53:23",
            "ended": null,
            "@id": "/user/21/ratings?rating_id=9",
            "edit": "/form/rating-edit"
        }
    ],
    "edit": "/form/rating-edit"
}</code></pre>
<p>A collection of my-rating. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>collectionOf</td><td>string</td><td>The term used for the collection item. For example, instead of promos.items, you could use promos.promo or promos[promos.collectionOf].</td></tr><tr><td>itemsLimit</td><td>integer</td><td>The maximum number of items that is returned in a collection page. To request more than the itemsLimit, make subsequent requests using the collection's 'next' or 'prev' link.</td></tr><tr><td>pageOf</td><td>string</td><td>The '@id' of the collection to which the current page belongs. In other words, this is the link to the default collection resource without pagination.</td></tr><tr><td>pageOrder</td><td>string</td><td>Either 'asc' or 'desc' based on item id's.</td></tr><tr><td>user_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#my-rating'>rating</a></td><td>link</td><td>A value assigned by a user to a team or brand, recorded as a score and reason.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#my-ratings-add'>add</a></td><td>form</td><td>A form for adding a resource to a collection, or for adding to a resource's tracked quantity.</td></tr><tr><td><a href='#my-ratings-edit'>edit</a></td><td>form</td><td>A form for updating a resource.</td></tr></tbody></table>
<h3 id="my-ratings-add">my-ratings-add</h3>
<pre><code class="language-javascript">
api.loadId(currResource['add']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Add a rating",
    "@type": "form",
    "@id": "/form/rating-add",
    "method": "POST",
    "inputs": {
        "required": [
            "brand_id",
            "score",
            "reason"
        ],
        "optional": [

        ]
    }
}</code></pre>
<p>Add a rating</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>["brand_id","score","reason"]</td></tr><tr><td>inputs optional</td><td>[]</td></tr></tbody></table>
<h4 id="my-ratings-add-0">my-ratings-add-0</h4>
<pre><code>var currResource = {
    "@id": "/user/21/ratings"
};

api.submit(currResource, 'add', {
    "brand_id": 105,
    "score": 0,
    "reason": "polluter"
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow a user to add a new rating</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "items": [

    ],
    "pageOrder": "desc",
    "itemsLimit": 50,
    "collectionOf": "rating",
    "pageOf": null,
    "user_id": 21,
    "@type": "userRatings",
    "@id": "/user/21/ratings",
    "score": 0,
    "reason": "polluter"
}</code></pre>
<h4 id="my-ratings-add-1">my-ratings-add-1</h4>
<pre><code>var currResource = {
    "@id": "/user/21/ratings"
};

api.submit(currResource, 'add', {
    "brand_id": "test test test {random}",
    "score": 0,
    "reason": "polluter"
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow a user to add a new rating for a previously unregistered brand</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "items": [

    ],
    "pageOrder": "desc",
    "itemsLimit": 50,
    "collectionOf": "rating",
    "pageOf": null,
    "user_id": 21,
    "@type": "userRatings",
    "@id": "/user/21/ratings",
    "brand_id": 116,
    "score": 0,
    "reason": "polluter",
    "rating_id": 11
}</code></pre>
<h4 id="my-ratings-add-2">my-ratings-add-2</h4>
<pre><code>var currResource = {
    "@id": "/user/21/ratings"
};

api.submit(currResource, 'add', {
    "brand_id": 105,
    "score": 0,
    "reason": "polluter"
}, successFxn, errorFxn);</code></pre>
<p>Example: should not allow a user to duplicate an existing rating, by other_id</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "items": [

    ],
    "pageOrder": "desc",
    "itemsLimit": 50,
    "collectionOf": "rating",
    "pageOf": null,
    "user_id": 21,
    "@type": "userRatings",
    "@id": "/user/21/ratings",
    "brand_id": 105,
    "score": 0,
    "reason": "polluter",
    "rating_id": 10
}</code></pre>
<h2 id="my-rating">my-rating</h2>
<pre><code class="language-javascript">
api.loadConcept('my-rating');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>[
    {
        "rating_id": 11,
        "brand_id": 116,
        "brand_name": "~Pizza Hut, Washington 99, Edmonds, WA, United States",
        "score": 64,
        "reason": "--social responsibility",
        "created": "2015-11-18 20:21:32",
        "ended": null,
        "@id": "/user/21/ratings?rating_id=11",
        "edit": "/form/rating-edit"
    }
]</code></pre>
<p>The rating given to current user to brands. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>brand_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td>brand_name</td><td>string</td><td>(deprecated) The name of the related brand. Use the (sub)resource 'name' instead.</td></tr><tr><td>created</td><td>string</td><td>The date and time when a resource was created, in the form of `YYYY-MM-DD hh:mm:ss`.</td></tr><tr><td>ended</td><td>NULL</td><td>The date of resource or relation deactivation, formatted as `YYYY-MM-DD hh:mm:ss`.</td></tr><tr><td>rating_id</td><td>integer</td><td>...</td></tr><tr><td>reason</td><td>string</td><td>A rationale related to a resource, such as as why a brand was given a certain score in a rating.</td></tr><tr><td>score</td><td>integer</td><td>A numeric value along a scale indicating low to high value. In the case a 'rating' resource, the score correlates to the reputation of a team or brand as a currency issuer.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#my-rating-edit'>edit</a></td><td>form</td><td>A form for updating a resource.</td></tr></tbody></table>
<h3 id="my-rating-edit">my-rating-edit</h3>
<pre><code class="language-javascript">
api.loadId(currResource['edit']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Update a rating",
    "@type": "form",
    "@id": "/form/rating-edit",
    "method": "POST",
    "inputs": {
        "required": [

        ],
        "optional": [
            "score",
            "reason",
            "ended"
        ]
    }
}</code></pre>
<p>Update a rating</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>[]</td></tr><tr><td>inputs optional</td><td>["score","reason","ended"]</td></tr></tbody></table>
<h4 id="my-rating-edit-0">my-rating-edit-0</h4>
<pre><code>var currResource = {
    "@id": "/user/21/ratings?rating_id=1"
};

api.submit(currResource, 'edit', {
    "score": 1,
    "reason": "non-polluter {random}"
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow a user to update a rating</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "items": [

    ],
    "pageOrder": "desc",
    "itemsLimit": 50,
    "collectionOf": "rating",
    "pageOf": null,
    "user_id": 21,
    "@type": "userRatings",
    "@id": "/user/21/ratings",
    "score": 1,
    "reason": "non-polluter 186"
}</code></pre>
<h2 id="my-about">my-about</h2>
<pre><code class="language-javascript">
api.loadConcept('my-about');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "@id": "/user/21/about",
    "user_id": 21,
    "name": "User One",
    "created": "2015-01-05 11:53:31",
    "numMemberships": 1,
    "totalHours": 0
}</code></pre>
<p>Public information about the currently logged-in user. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>created</td><td>string</td><td>The date and time when a resource was created, in the form of `YYYY-MM-DD hh:mm:ss`.</td></tr><tr><td>name</td><td>string</td><td>The name of the resource.</td></tr><tr><td>numMemberships</td><td>integer</td><td>The number of teams a user belongs to.</td></tr><tr><td>totalHours</td><td>integer</td><td>The number of hours per week that a user plans to spend contributing to his team(s) goals.</td></tr><tr><td>user_id</td><td>integer</td><td>(deprecated)</td></tr></tbody></table>
<h2 id="my-teams">my-teams</h2>
<pre><code class="language-javascript">
api.loadConcept('my-teams');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "@type": "userTeams",
    "user_id": 21,
    "@id": "/user/21/teams",
    "collectionOf": "brand",
    "brand": [
        "/team/104"
    ]
}</code></pre>
<p>A collection of the teams that the current user belongs to. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>collectionOf</td><td>string</td><td>The term used for the collection item. For example, instead of promos.items, you could use promos.promo or promos[promos.collectionOf].</td></tr><tr><td>user_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td>brand</td><td>link</td><td>The currency issuer related to this resource.</td></tr></tbody></table>
<h2 id="my-issuers">my-issuers</h2>
<pre><code class="language-javascript">
api.loadConcept('my-issuers');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "pageOrder": null,
    "itemsLimit": 50,
    "collectionOf": "brand",
    "pageOf": null,
    "@type": "userBrands",
    "user_id": 21,
    "@id": "/user/21/brands",
    "brand": [
        "/brand/104"
    ],
    "add": "/form/brand-registration"
}</code></pre>
<p>blah blah blah </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>collectionOf</td><td>string</td><td>The term used for the collection item. For example, instead of promos.items, you could use promos.promo or promos[promos.collectionOf].</td></tr><tr><td>itemsLimit</td><td>integer</td><td>The maximum number of items that is returned in a collection page. To request more than the itemsLimit, make subsequent requests using the collection's 'next' or 'prev' link.</td></tr><tr><td>pageOf</td><td>NULL</td><td>The '@id' of the collection to which the current page belongs. In other words, this is the link to the default collection resource without pagination.</td></tr><tr><td>pageOrder</td><td>NULL</td><td>Either 'asc' or 'desc' based on item id's.</td></tr><tr><td>user_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td>brand</td><td>link</td><td>The currency issuer related to this resource.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#my-issuers-add'>add</a></td><td>form</td><td>A form for adding a resource to a collection, or for adding to a resource's tracked quantity.</td></tr></tbody></table>
<h3 id="my-issuers-add">my-issuers-add</h3>
<pre><code class="language-javascript">
api.loadId(currResource['add']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Brand registration",
    "@type": "form",
    "@id": "/form/brand-registration",
    "method": "POST",
    "inputs": {
        "required": [
            "name",
            "mission",
            "description"
        ],
        "optional": [
            "url",
            "advisor",
            "type_system",
            "type_id",
            "country_code",
            "area_code"
        ]
    }
}</code></pre>
<p>Brand registration</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>["name","mission","description"]</td></tr><tr><td>inputs optional</td><td>["url","advisor","type_system","type_id","country_code","area_code"]</td></tr></tbody></table>
<h4 id="my-issuers-add-0">my-issuers-add-0</h4>
<pre><code>var currResource = {
    "@id": "/user/21/brands"
};

api.submit(currResource, 'add', {
    "name": "abc-{xtime}.org",
    "mission": "To be the third brand - {xtime}",
    "description": "the third brand"
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow registration by a brand new user</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "name": "abc-1453363549.org",
    "mission": "To be the third brand - 1453363549",
    "description": "the third brand",
    "brand_id": 115,
    "members": [
        {
            "brand_id": 115,
            "user_id": 21,
            "role": "admin",
            "hours": 0,
            "member_id": 56
        }
    ],
    "accounts": [
        {
            "account_id": 116,
            "brand_id": 115,
            "name": "Main Revenue",
            "authcode": "cftix",
            "unit": "hour",
            "sign": -1
        },
        {
            "account_id": 117,
            "brand_id": 115,
            "name": "Main Expense",
            "authcode": "cftix",
            "unit": "hour",
            "sign": 1
        }
    ],
    "holders": [
        {
            "holder_id": 46,
            "account_id": 116,
            "user_id": 21,
            "authcode": "cftix",
            "limkey": "abc"
        },
        {
            "holder_id": 47,
            "account_id": 117,
            "user_id": 21,
            "authcode": "cftix",
            "limkey": "abc"
        }
    ]
}</code></pre>
<h4 id="my-issuers-add-1">my-issuers-add-1</h4>
<pre><code>var currResource = {
    "@id": "/user/21/brands"
};

api.submit(currResource, 'add', {
    "name": "xyz-{xtime}.org",
    "description": "the third brand"
}, successFxn, errorFxn);</code></pre>
<p>Example: should NOT allow user registration with missing mission</p>
<blockquote>
<p>Status <span style='color:#f00'>403</span></p>
</blockquote>
<pre><code>{
    "@context": "/api/ref/context.php",
    "error": "Missing object properties: mission",
    "hints": [

    ],
    "@graph": [

    ],
    "requestURI": "/user/21/brands"
}</code></pre>
<h1 id="team-resources">Team Resources</h1>
<p>All members of a team share access to these resources. The accessible resources are based on the membership of the currently logged-in user.</p>
<h2 id="team-brand">team-brand</h2>
<pre><code class="language-javascript">
api.loadConcept('team-brand');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>[
    {
        "id": 104,
        "@type": "brand",
        "@id": "/team/104",
        "name": "abc",
        "logo": null,
        "members": "/team/104/members",
        "accounts": "/team/104/accounts",
        "throttles": "/team/104/throttles",
        "records": "/budget/104/records",
        "about": "/brand/104/about",
        "promos": "/brand/104/promos",
        "orders": "/team/104/orders",
        "tally": {
            "@type": "budgetTally",
            "added": 1500.11,
            "intrause": 90.76,
            "inflow": 9.37,
            "outflow": 0,
            "revBudget": 1399.98,
            "expBudget": 1409.35,
            "numMembers": 2,
            "totalMemberHours": 0
        },
        "edit": "/form/brand-edit"
    }
]</code></pre>
<p>A brand to which the current user belongs to. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>id</td><td>integer</td><td>A numeric identifier for a resource, that is unique for a given resource type.</td></tr><tr><td>logo</td><td>NULL</td><td>An external link to an icon image that symbolizes a brand.</td></tr><tr><td>name</td><td>string</td><td>The name of the resource.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td>about</td><td>link</td><td>Information about the current resource.</td></tr><tr><td><a href='#team-accounts'>accounts</a></td><td>link</td><td>A collection of brand accounts, that is, a brand's ledger.</td></tr><tr><td><a href='#team-members'>members</a></td><td>link</td><td>A collection of brand members.</td></tr><tr><td><a href='#team-orders'>orders</a></td><td>link</td><td>...</td></tr><tr><td><a href='#team-promos'>promos</a></td><td>link</td><td>A collection of brand promotions.</td></tr><tr><td>records</td><td>link</td><td>A collection of 'record'.</td></tr><tr><td>tally</td><td>link</td><td>Periodic aggregated budget activity information, by brand and type of activity.</td></tr><tr><td><a href='#team-throttles'>throttles</a></td><td>link</td><td>A collection of 'throttle'.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#team-brand-edit'>edit</a></td><td>form</td><td>A form for updating a resource.</td></tr></tbody></table>
<h2 id="team-members">team-members</h2>
<pre><code class="language-javascript">
api.loadConcept('team-members');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "pageOrder": "asc",
    "itemsLimit": 50,
    "collectionOf": "member",
    "pageOf": "/team/104/members",
    "brand_id": 104,
    "@type": "members",
    "@id": "/team/104/members",
    "member": [
        {
            "id": 53,
            "user_id": 21,
            "role": "admin",
            "hours": 0,
            "created": "2015-01-05 11:53:31",
            "name": "User One",
            "joined": "2015-11-17 04:15:14",
            "revoked": null,
            "@id": "/team/104/members?member_id=53",
            "brand": "/team/104"
        },
        {
            "id": 55,
            "user_id": 23,
            "role": "staff",
            "hours": 0,
            "created": "2015-01-05 11:53:31",
            "name": "User Three",
            "joined": null,
            "revoked": null,
            "@id": "/team/104/members?member_id=55",
            "brand": "/team/104"
        }
    ]
}</code></pre>
<p>A collection of team-member. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>brand_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td>collectionOf</td><td>string</td><td>The term used for the collection item. For example, instead of promos.items, you could use promos.promo or promos[promos.collectionOf].</td></tr><tr><td>itemsLimit</td><td>integer</td><td>The maximum number of items that is returned in a collection page. To request more than the itemsLimit, make subsequent requests using the collection's 'next' or 'prev' link.</td></tr><tr><td>pageOf</td><td>string</td><td>The '@id' of the collection to which the current page belongs. In other words, this is the link to the default collection resource without pagination.</td></tr><tr><td>pageOrder</td><td>string</td><td>Either 'asc' or 'desc' based on item id's.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#team-member'>member</a></td><td>link</td><td>A user that is a member of a brand.</td></tr></tbody></table>
<h2 id="team-member">team-member</h2>
<pre><code class="language-javascript">
api.loadConcept('team-member');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>[
    {
        "id": 53,
        "user_id": 21,
        "role": "admin",
        "hours": 0,
        "created": "2015-01-05 11:53:31",
        "name": "User One",
        "joined": "2015-11-17 04:15:14",
        "revoked": null,
        "@id": "/team/104/members?member_id=53",
        "brand": "/team/104"
    }
]</code></pre>
<p>A team member. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>created</td><td>string</td><td>The date and time when a resource was created, in the form of `YYYY-MM-DD hh:mm:ss`.</td></tr><tr><td>hours</td><td>integer</td><td>The number of hours per week that a member spends towards contributing to the team goals.</td></tr><tr><td>id</td><td>integer</td><td>A numeric identifier for a resource, that is unique for a given resource type.</td></tr><tr><td>joined</td><td>string</td><td>The date when a user joined a team.</td></tr><tr><td>name</td><td>string</td><td>The name of the resource.</td></tr><tr><td>revoked</td><td>NULL</td><td>The date when a relation between resources was ended, such as when a member leaves a team.</td></tr><tr><td>role</td><td>string</td><td>A user's role within the given context, such as a team member role.</td></tr><tr><td>user_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#team-brand'>brand</a></td><td>link</td><td>The currency issuer related to this resource.</td></tr></tbody></table>
<h2 id="team-accounts">team-accounts</h2>
<pre><code class="language-javascript">
api.loadConcept('team-accounts');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "pageOrder": "asc",
    "itemsLimit": 50,
    "collectionOf": "account",
    "pageOf": "/team/104/accounts",
    "brand_id": 104,
    "@type": "accounts",
    "@id": "/team/104/accounts",
    "account": [
        {
            "id": 92,
            "name": "Main Revenue",
            "balance": -1399.98,
            "unit": "hour",
            "authcode": "cftix",
            "created": "2015-01-05 11:53:31",
            "throttle_id": 0,
            "@id": "/team/104/accounts?account_id=",
            "brand": "/team/104"
        },
        {
            "id": 93,
            "name": "Main Expense",
            "balance": 1221.82,
            "unit": "hour",
            "authcode": "cftix",
            "created": "2015-01-05 11:53:31",
            "throttle_id": 0,
            "@id": "/team/104/accounts?account_id=",
            "brand": "/team/104"
        },
        {
            "id": 94,
            "name": "Personal Expense",
            "balance": 187.53,
            "unit": "hour",
            "authcode": "ti",
            "created": "2015-01-05 11:53:32",
            "throttle_id": 0,
            "@id": "/team/104/accounts?account_id=",
            "brand": "/team/104"
        }
    ]
}</code></pre>
<p>A collection of team-account, also referred to as a team ledger. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>brand_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td>collectionOf</td><td>string</td><td>The term used for the collection item. For example, instead of promos.items, you could use promos.promo or promos[promos.collectionOf].</td></tr><tr><td>itemsLimit</td><td>integer</td><td>The maximum number of items that is returned in a collection page. To request more than the itemsLimit, make subsequent requests using the collection's 'next' or 'prev' link.</td></tr><tr><td>pageOf</td><td>string</td><td>The '@id' of the collection to which the current page belongs. In other words, this is the link to the default collection resource without pagination.</td></tr><tr><td>pageOrder</td><td>string</td><td>Either 'asc' or 'desc' based on item id's.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#team-account'>account</a></td><td>link</td><td>A brand account. An account with a sign=-1 is a revenue budget that holds debits, with a normal balance of <= 0, to be used for receiving payments. An account with a sign=1 is an expense budget that holds credits, with a normal balance >=0, to be used as payment.</td></tr></tbody></table>
<h2 id="team-account">team-account</h2>
<pre><code class="language-javascript">
api.loadConcept('team-account');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>[
    {
        "id": 92,
        "name": "Main Revenue",
        "balance": -1399.98,
        "unit": "hour",
        "authcode": "cftix",
        "created": "2015-01-05 11:53:31",
        "throttle_id": 0,
        "@id": "/team/104/accounts?account_id=",
        "brand": "/team/104"
    }
]</code></pre>
<p>Accounts belonging to a team. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>authcode</td><td>string</td><td>The permissions related to a resource. In the case of an account or an accountholding, the authcode encodes which transaction activities are allowed based on the intersecting values between account.authcode and holder.authcode. The presence of the following characters in the authcode signify the corresponding permission: 'c' to add budget, 'f' to act as a budget transfer originator, 't' to act as a buget transfer recipient, 'i' for internal budget use within a brand, 'x' for external budget use between brands.</td></tr><tr><td>balance</td><td>double</td><td>The available amount related to a resource, such as an account balance.</td></tr><tr><td>created</td><td>string</td><td>The date and time when a resource was created, in the form of `YYYY-MM-DD hh:mm:ss`.</td></tr><tr><td>id</td><td>integer</td><td>A numeric identifier for a resource, that is unique for a given resource type.</td></tr><tr><td>name</td><td>string</td><td>The name of the resource.</td></tr><tr><td>throttle_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td>unit</td><td>string</td><td>The accounting-unit of a budget, also the currency unit. The only possible value right now is XTE.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#team-brand'>brand</a></td><td>link</td><td>The currency issuer related to this resource.</td></tr></tbody></table>
<h2 id="team-promos">team-promos</h2>
<pre><code class="language-javascript">
api.loadConcept('team-promos');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "pageOrder": "desc",
    "itemsLimit": 50,
    "collectionOf": "promo",
    "pageOf": "/brand/104/promos",
    "brand_id": 104,
    "@type": "brandPromos",
    "@id": "/brand/104/promos",
    "add": "/form/promo-add",
    "promo": [
        "/promo/1",
        "/promo/3",
        "/promo/4"
    ]
}</code></pre>
<p>A collection of team-promo. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>brand_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td>collectionOf</td><td>string</td><td>The term used for the collection item. For example, instead of promos.items, you could use promos.promo or promos[promos.collectionOf].</td></tr><tr><td>itemsLimit</td><td>integer</td><td>The maximum number of items that is returned in a collection page. To request more than the itemsLimit, make subsequent requests using the collection's 'next' or 'prev' link.</td></tr><tr><td>pageOf</td><td>string</td><td>The '@id' of the collection to which the current page belongs. In other words, this is the link to the default collection resource without pagination.</td></tr><tr><td>pageOrder</td><td>string</td><td>Either 'asc' or 'desc' based on item id's.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#team-promo'>promo</a></td><td>link</td><td>A brand promotion, used to advertise anything that could be the target of a payment.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#team-promos-add'>add</a></td><td>form</td><td>A form for adding a resource to a collection, or for adding to a resource's tracked quantity.</td></tr></tbody></table>
<h3 id="team-promos-add">team-promos-add</h3>
<pre><code class="language-javascript">
api.loadId(currResource['add']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Add",
    "@type": "form",
    "@id": "/form/promo-add",
    "method": "POST",
    "inputs": {
        "required": [
            "name",
            "description",
            "amount",
            "holder_id"
        ],
        "optional": [
            "imageURL",
            "infoURL",
            "expires",
            "by_all_limit",
            "by_brand_limit",
            "by_user_limit",
            "by_user_wait",
            "keyword"
        ]
    }
}</code></pre>
<p>Add</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>["name","description","amount","holder_id"]</td></tr><tr><td>inputs optional</td><td>["imageURL","infoURL","expires","by_all_limit","by_brand_limit","by_user_limit","by_user_wait","keyword"]</td></tr></tbody></table>
<h4 id="team-promos-add-0">team-promos-add-0</h4>
<pre><code>var currResource = {
    "@id": "/brand/104/promos"
};

api.submit(currResource, 'add', {
    "name": "product promo {hex}",
    "description": "a brand 104 promo {hex}",
    "amount": 5.43,
    "holder_id": 41
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow a brand member to add a promo specification</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "name": "product promo {hex}",
    "description": "a brand 104 promo {hex}",
    "amount": 5.43,
    "promo_id": 4,
    "relay": {
        "amount_min": 5.43,
        "amount_max": 5.43,
        "txntype": "pn",
        "secret": "eb11",
        "by_all_limit": 25,
        "by_brand_limit": 5,
        "by_user_limit": 2,
        "by_user_wait": 24,
        "relay_id": 6
    },
    "relay_id": 6
}</code></pre>
<h4 id="team-promos-add-1">team-promos-add-1</h4>
<pre><code>var currResource = {
    "@id": "/brand/105/promos"
};

api.submit(currResource, 'add', {
    "name": "product promo {hex}",
    "description": "a brand 105 promo {hex}",
    "amount": 3.45
}, successFxn, errorFxn);</code></pre>
<p>Example: should NOT allow a non-brand member to add a promo specification</p>
<blockquote>
<p>Status <span style='color:#f00'>403</span></p>
</blockquote>
<pre><code>{
    "@context": "/api/ref/context.php",
    "error": "The requester is not a member of brand #105.",
    "hints": [

    ],
    "@graph": [

    ],
    "requestURI": "/brand/105/promos"
}</code></pre>
<h4 id="team-promos-add-2">team-promos-add-2</h4>
<pre><code>var currResource = {
    "@id": "/promo/collection"
};

api.submit(currResource, 'add', {
    "name": "product promo {hex}",
    "description": "a brand 104 promo {hex}",
    "amount": 5.43,
    "holder_id": 41
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow a brand member to add using the promo/collection endpoint</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "name": "product promo {hex}",
    "description": "a brand 104 promo {hex}",
    "amount": 5.43,
    "promo_id": 3,
    "relay": {
        "amount_min": 5.43,
        "amount_max": 5.43,
        "txntype": "pn",
        "secret": "1123d",
        "by_all_limit": 25,
        "by_brand_limit": 5,
        "by_user_limit": 2,
        "by_user_wait": 24,
        "relay_id": 5
    },
    "relay_id": 5
}</code></pre>
<h2 id="team-promo">team-promo</h2>
<pre><code class="language-javascript">
api.loadConcept('team-promo');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>[
    {
        "id": 1,
        "name": "Test promo",
        "@id": "/promo/1",
        "@type": "promo",
        "description": "A brand #104 promo",
        "amount": 25,
        "imageURL": null,
        "infoURL": "http://tatag.dev/ad/1",
        "created": "2014-12-31 16:00:00",
        "updated": null,
        "expires": null,
        "keyword": "ad",
        "by_all_limit": 25,
        "by_brand_limit": 5,
        "by_user_limit": 25,
        "by_user_wait": 24,
        "brand": "/brand/104",
        "relay": "/relay/1",
        "payURL": "http://tatag.dev/for/ad-1",
        "code": "ad-1",
        "promoPage": "http://tatag.dev/ad/1",
        "edit": "/form/promo-edit"
    }
]</code></pre>
<p>A promo that has been created by a team, intended to announce or advertise products, services, and projects that any user could help pay for. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>amount</td><td>integer</td><td>A numeric value that quantifies an important aspect of a resource. For example, in the context of a promo or transaction record, the amount may be a product price or a suggested donation amount.</td></tr><tr><td>by_all_limit</td><td>integer</td><td>This is a weekly limit on the total inflow transaction amount for a given account or usage for a given product, regardless of the payor's brand or user id. This is similar to coupon restrictions, allowing your brand to set limits on transactions and also to combat spammy payment offers. </td></tr><tr><td>by_brand_limit</td><td>integer</td><td>A weekly limit on total inflow transaction amount for a given account or usage for a given promo, based on the payor's brand id. This is similar to coupon restrictions, allowing your brand to set limits on transactions and also to combat spammy payment offers. </td></tr><tr><td>by_user_limit</td><td>integer</td><td>A weekly limit on total inflow transaction amount for a given account or usage for a given promo, based on the payor's user id. This is similar to coupon restrictions, allowing your brand to set limits on transactions and also to combat spammy payment offers. </td></tr><tr><td>by_user_wait</td><td>integer</td><td>How long a user must wait after using a promo, before that user can reuse the same promo.</td></tr><tr><td>code</td><td>string</td><td>An alpha-numeric string that a payment recipient shares with a payor to authorize a payment or promo use.</td></tr><tr><td>created</td><td>string</td><td>The date and time when a resource was created, in the form of `YYYY-MM-DD hh:mm:ss`.</td></tr><tr><td>description</td><td>string</td><td>...</td></tr><tr><td>expires</td><td>NULL</td><td>The date after which a given resource will no longer be available. For example, a promo may expire after a week.</td></tr><tr><td>id</td><td>integer</td><td>A numeric identifier for a resource, that is unique for a given resource type.</td></tr><tr><td>imageURL</td><td>NULL</td><td>If given, a user interface provider may use this link to display a brand icon or promo image.</td></tr><tr><td>infoURL</td><td>string</td><td>External web page about a resource.</td></tr><tr><td>keyword</td><td>string</td><td>In the context of a relay, this is the prefix to be used with a relay id, such as the 'food-' in the relay token value of 'food-645'. This keyword is assigned by the user when creating a promo, and also helps to counter (but not prevent) spammy transaction offers by making it harder to guess the full value of a relay token.</td></tr><tr><td>name</td><td>string</td><td>The name of the resource.</td></tr><tr><td>payURL</td><td>string</td><td>A URL that, when clicked, is intended to automatically open the tatag.cc wallet of a payor.</td></tr><tr><td>promoPage</td><td>string</td><td>The tatag.cc-hosted web page about the promo. An infoURL, when available, should be preferred as an external link.</td></tr><tr><td>updated</td><td>NULL</td><td>The UNIX timestamp when a resource was last updated.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#team-brand'>brand</a></td><td>link</td><td>The currency issuer related to this resource.</td></tr><tr><td>relay</td><td>link</td><td>A token that is used to preauthorize the use of a recipient account.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#team-promo-edit'>edit</a></td><td>form</td><td>A form for updating a resource.</td></tr></tbody></table>
<h3 id="team-promo-edit">team-promo-edit</h3>
<pre><code class="language-javascript">
api.loadId(currResource['edit']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Edit",
    "@type": "form",
    "@id": "/form/promo-edit",
    "method": "POST",
    "inputs": {
        "required": [

        ],
        "optional": [
            "name",
            "description",
            "amount",
            "imageURL",
            "infoURL",
            "expires",
            "keyword"
        ]
    }
}</code></pre>
<p>Edit</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>[]</td></tr><tr><td>inputs optional</td><td>["name","description","amount","imageURL","infoURL","expires","keyword"]</td></tr></tbody></table>
<h4 id="team-promo-edit-0">team-promo-edit-0</h4>
<pre><code>var currResource = {
    "@id": "/promo/1"
};

api.submit(currResource, 'edit', {
    "name": "{hex}",
    "amount": 8.97
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow a brand admin to edit a promo specification</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "name": "{hex}",
    "amount": 8.97
}</code></pre>
<h4 id="team-promo-edit-1">team-promo-edit-1</h4>
<pre><code>var currResource = {
    "@id": "/promo/2"
};

api.submit(currResource, 'edit', {
    "name": "{hex}",
    "amount": 7.98
}, successFxn, errorFxn);</code></pre>
<p>Example: should NOT allow a non-brand admin to edit a promo specification</p>
<blockquote>
<p>Status <span style='color:#f00'>403</span></p>
</blockquote>
<pre><code>{
    "@context": "/api/ref/context.php",
    "error": "The user is not a member of the brand that owns this promo and does not have accees to its details.",
    "hints": [

    ],
    "@graph": [

    ],
    "requestURI": "/promo/2"
}</code></pre>
<h2 id="team-throttles">team-throttles</h2>
<pre><code class="language-javascript">
api.loadConcept('team-throttles');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "brand_id": 104,
    "@type": "throttles",
    "@id": "/team/104/throttles",
    "collectionOf": "throttle",
    "throttle": [
        {
            "period": 172800,
            "by_all": 100,
            "by_brand": 20,
            "by_user": 2,
            "created": "2015-02-24 02:48:00",
            "updated": null,
            "ended": null,
            "productURL": null,
            "id": 1,
            "@id": "/throttle/1",
            "brand": "/team/104"
        },
        {
            "period": 3600,
            "by_all": 10,
            "by_brand": 2,
            "by_user": 1,
            "created": "2015-02-24 02:48:00",
            "updated": null,
            "ended": null,
            "productURL": null,
            "id": 2,
            "@id": "/throttle/2",
            "brand": "/team/104"
        },
        {
            "period": 9999999,
            "by_all": 100,
            "by_brand": 20,
            "by_user": 2,
            "created": "2015-02-24 02:48:00",
            "updated": null,
            "ended": null,
            "productURL": null,
            "id": 3,
            "@id": "/throttle/3",
            "brand": "/team/104"
        }
    ]
}</code></pre>
<p>A collection of team-throttle. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>brand_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td>collectionOf</td><td>string</td><td>The term used for the collection item. For example, instead of promos.items, you could use promos.promo or promos[promos.collectionOf].</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#team-throttle'>throttle</a></td><td>link</td><td>A limit on how much an account may be used for transactions for a given period, specified as amount per brand, amount per user, and amount by all.</td></tr></tbody></table>
<h2 id="team-throttle">team-throttle</h2>
<pre><code class="language-javascript">
api.loadConcept('team-throttle');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>[
    {
        "period": 172800,
        "by_all": 100,
        "by_brand": 20,
        "by_user": 2,
        "created": "2015-02-24 02:48:00",
        "updated": null,
        "ended": null,
        "productURL": null,
        "id": 1,
        "@id": "/throttle/1",
        "brand": "/team/104"
    }
]</code></pre>
<p>A set of periodic limits imposed on inflows or outflows from a team account. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>by_all</td><td>integer</td><td>...</td></tr><tr><td>by_brand</td><td>integer</td><td>...</td></tr><tr><td>by_user</td><td>integer</td><td>...</td></tr><tr><td>created</td><td>string</td><td>The date and time when a resource was created, in the form of `YYYY-MM-DD hh:mm:ss`.</td></tr><tr><td>ended</td><td>NULL</td><td>The date of resource or relation deactivation, formatted as `YYYY-MM-DD hh:mm:ss`.</td></tr><tr><td>id</td><td>integer</td><td>A numeric identifier for a resource, that is unique for a given resource type.</td></tr><tr><td>period</td><td>integer</td><td>The time period that applies to a resource.</td></tr><tr><td>productURL</td><td>NULL</td><td>...</td></tr><tr><td>updated</td><td>NULL</td><td>The UNIX timestamp when a resource was last updated.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#team-brand'>brand</a></td><td>link</td><td>The currency issuer related to this resource.</td></tr></tbody></table>
<h2 id="team-orders">team-orders</h2>
<pre><code class="language-javascript">
api.loadConcept('team-orders');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "pageOrder": "asc",
    "itemsLimit": 50,
    "collectionOf": "order",
    "pageOf": "/team/104/orders",
    "@type": "teamOrders",
    "brand_id": 104,
    "@id": "/team/104/orders",
    "order": [
        "/team/104/orders?record_id=40"
    ],
    "update": "/form/order-update"
}</code></pre>
<p>blah blah blah </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>brand_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td>collectionOf</td><td>string</td><td>The term used for the collection item. For example, instead of promos.items, you could use promos.promo or promos[promos.collectionOf].</td></tr><tr><td>itemsLimit</td><td>integer</td><td>The maximum number of items that is returned in a collection page. To request more than the itemsLimit, make subsequent requests using the collection's 'next' or 'prev' link.</td></tr><tr><td>pageOf</td><td>string</td><td>The '@id' of the collection to which the current page belongs. In other words, this is the link to the default collection resource without pagination.</td></tr><tr><td>pageOrder</td><td>string</td><td>Either 'asc' or 'desc' based on item id's.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#team-order'>order</a></td><td>link</td><td>...</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#team-orders-update'>update</a></td><td>form</td><td>...</td></tr></tbody></table>
<h2 id="team-order">team-order</h2>
<pre><code class="language-javascript">
api.loadConcept('team-order');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>[
    {
        "record_id": 40,
        "created": "2015-11-18 07:21:15",
        "amount": 25,
        "note": "for ad-1",
        "order_step": 0,
        "updated": "2015-11-18 23:10:25",
        "@id": "/team/104/orders?record_id=40",
        "update": "/form/order-update",
        "promo": "/promo/1",
        "user": "/user/21/about",
        "from": "/brand/104/about"
    }
]</code></pre>
<p>blah blah blah </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>amount</td><td>integer</td><td>A numeric value that quantifies an important aspect of a resource. For example, in the context of a promo or transaction record, the amount may be a product price or a suggested donation amount.</td></tr><tr><td>created</td><td>string</td><td>The date and time when a resource was created, in the form of `YYYY-MM-DD hh:mm:ss`.</td></tr><tr><td>from</td><td>string</td><td>...</td></tr><tr><td>note</td><td>string</td><td>A short text used to annotate a resource such as a transaction record.</td></tr><tr><td>order_step</td><td>integer</td><td>...</td></tr><tr><td>record_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td>updated</td><td>string</td><td>The UNIX timestamp when a resource was last updated.</td></tr><tr><td>user</td><td>string</td><td>A person-resource.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#team-promo'>promo</a></td><td>link</td><td>A brand promotion, used to advertise anything that could be the target of a payment.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#team-order-update'>update</a></td><td>form</td><td>...</td></tr></tbody></table>
<h3 id="team-order-update">team-order-update</h3>
<pre><code class="language-javascript">
api.loadId(currResource['update']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Update the status of an order",
    "@type": "form",
    "@id": "/form/order-update",
    "method": "POST",
    "inputs": {
        "required": [
            "order_step"
        ]
    }
}</code></pre>
<p>Update the status of an order</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>["order_step"]</td></tr><tr><td>inputs optional</td><td>null</td></tr></tbody></table>
<h4 id="team-order-update-0">team-order-update-0</h4>
<pre><code>var currResource = {
    "@id": "/team/104/orders?record_id=34"
};

api.submit(currResource, 'update', {
    "order_step": 5
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow a brand member to update an order_step</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "order_step": 5
}</code></pre>
<h4 id="team-order-update-1">team-order-update-1</h4>
<pre><code>var currResource = {
    "@id": "/team/105/orders?record_id=37"
};

api.submit(currResource, 'update', {
    "order_step": 5
}, successFxn, errorFxn);</code></pre>
<p>Example: should NOT allow a non-brand member to update an order step</p>
<blockquote>
<p>Status <span style='color:#f00'>403</span></p>
</blockquote>
<pre><code>{
    "@context": "/api/ref/context.php",
    "error": "Only members or admins of brand #105 can view its orders.",
    "hints": [

    ],
    "@graph": [

    ],
    "requestURI": "/team/105/orders?record_id=37"
}</code></pre>
<h1 id="admin-resources">Admin Resources</h1>
<p>The admins of a brand share access to these resources. The accessible resources are based on the admin status of the currently logged-in user.</p>
<h2 id="admin-brand">admin-brand</h2>
<pre><code class="language-javascript">
api.loadConcept('admin-brand');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>[
    {
        "id": 104,
        "@type": "brand",
        "@id": "/brand/104",
        "role": "admin",
        "name": "abc",
        "brand_name": "abc",
        "members": "/brand/104/members",
        "accounts": "/brand/104/accounts",
        "about": "/brand/104/about",
        "promos": "/brand/104/promos",
        "records": "/budget/104/records",
        "throttles": "/budget/104/throttles",
        "tally": {
            "@type": "budgetTally",
            "added": 1500.11,
            "intrause": 90.76,
            "inflow": 9.37,
            "outflow": 0,
            "revBudget": 1399.98,
            "expBudget": 1409.35,
            "numMembers": 2,
            "totalMemberHours": 0
        },
        "edit": "/form/brand-edit"
    }
]</code></pre>
<p>A brand that is administered by the current user. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>brand_name</td><td>string</td><td>(deprecated) The name of the related brand. Use the (sub)resource 'name' instead.</td></tr><tr><td>id</td><td>integer</td><td>A numeric identifier for a resource, that is unique for a given resource type.</td></tr><tr><td>name</td><td>string</td><td>The name of the resource.</td></tr><tr><td>role</td><td>string</td><td>A user's role within the given context, such as a team member role.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#admin-about'>about</a></td><td>link</td><td>Information about the current resource.</td></tr><tr><td><a href='#admin-accounts'>accounts</a></td><td>link</td><td>A collection of brand accounts, that is, a brand's ledger.</td></tr><tr><td><a href='#admin-members'>members</a></td><td>link</td><td>A collection of brand members.</td></tr><tr><td><a href='#admin-promos'>promos</a></td><td>link</td><td>A collection of brand promotions.</td></tr><tr><td>records</td><td>link</td><td>A collection of 'record'.</td></tr><tr><td><a href='#admin-tally'>tally</a></td><td>link</td><td>Periodic aggregated budget activity information, by brand and type of activity.</td></tr><tr><td><a href='#admin-throttles'>throttles</a></td><td>link</td><td>A collection of 'throttle'.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#admin-brand-edit'>edit</a></td><td>form</td><td>A form for updating a resource.</td></tr></tbody></table>
<h3 id="admin-brand-edit">admin-brand-edit</h3>
<pre><code class="language-javascript">
api.loadId(currResource['edit']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Edit",
    "@type": "form",
    "@id": "/form/brand-edit",
    "method": "POST",
    "inputs": {
        "required": [

        ],
        "optional": [
            "name",
            "url",
            "mission",
            "description",
            "url",
            "advisor",
            "type_system",
            "type_id",
            "country_code",
            "area_code",
            "logo"
        ]
    }
}</code></pre>
<p>Edit</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>[]</td></tr><tr><td>inputs optional</td><td>["name","url","mission","description","url","advisor","type_system","type_id","country_code","area_code","logo"]</td></tr></tbody></table>
<h4 id="admin-brand-edit-0">admin-brand-edit-0</h4>
<pre><code>var currResource = {
    "@id": "/brand/104"
};

api.submit(currResource, 'edit', {
    "mission": "another mission -{xtime}",
    "description": "another description -{xtime}"
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow an admin to edit a brand's info</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "mission": "another mission -1453364051",
    "description": "another description -1453364051"
}</code></pre>
<h4 id="admin-brand-edit-1">admin-brand-edit-1</h4>
<pre><code>var currResource = {
    "@id": "/brand/105"
};

api.submit(currResource, 'edit', {
    "mission": "non-admin's brand mission -{xtime}",
    "description": "non-admin's brand description -{xtime}"
}, successFxn, errorFxn);</code></pre>
<p>Example: should NOT allow a non-admin to edit a brand's alias</p>
<blockquote>
<p>Status <span style='color:#f00'>403</span></p>
</blockquote>
<pre><code>{
    "@context": "/api/ref/context.php",
    "error": "The requester is not an admin for brand #105.",
    "hints": [

    ],
    "@graph": [

    ],
    "requestURI": "/brand/105"
}</code></pre>
<h2 id="admin-members">admin-members</h2>
<pre><code class="language-javascript">
api.loadConcept('admin-members');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "pageOrder": "asc",
    "itemsLimit": 50,
    "collectionOf": "member",
    "pageOf": "/brand/104/members",
    "brand_id": 104,
    "@type": "brandMembers",
    "@id": "/brand/104/members",
    "add": "/form/member-add",
    "member": [
        "/brand/104/members?member_id=53",
        "/brand/104/members?member_id=55"
    ],
    "edit": "/form/admin-member-edit"
}</code></pre>
<p>A collection of admin-member. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>brand_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td>collectionOf</td><td>string</td><td>The term used for the collection item. For example, instead of promos.items, you could use promos.promo or promos[promos.collectionOf].</td></tr><tr><td>itemsLimit</td><td>integer</td><td>The maximum number of items that is returned in a collection page. To request more than the itemsLimit, make subsequent requests using the collection's 'next' or 'prev' link.</td></tr><tr><td>pageOf</td><td>string</td><td>The '@id' of the collection to which the current page belongs. In other words, this is the link to the default collection resource without pagination.</td></tr><tr><td>pageOrder</td><td>string</td><td>Either 'asc' or 'desc' based on item id's.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#admin-member'>member</a></td><td>link</td><td>A user that is a member of a brand.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#admin-members-add'>add</a></td><td>form</td><td>A form for adding a resource to a collection, or for adding to a resource's tracked quantity.</td></tr><tr><td><a href='#admin-members-edit'>edit</a></td><td>form</td><td>A form for updating a resource.</td></tr></tbody></table>
<h3 id="admin-members-add">admin-members-add</h3>
<pre><code class="language-javascript">
api.loadId(currResource['add']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Add a member",
    "@type": "form",
    "@id": "/form/member-add",
    "method": "POST",
    "inputs": {
        "required": [
            "user_id",
            "role",
            "hours"
        ],
        "optional": [

        ]
    }
}</code></pre>
<p>Add a member</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>["user_id","role","hours"]</td></tr><tr><td>inputs optional</td><td>[]</td></tr></tbody></table>
<h4 id="admin-members-add-0">admin-members-add-0</h4>
<pre><code>var currResource = {
    "@id": "/brand/104/members"
};

api.submit(currResource, 'add', {
    "user_id": 24,
    "role": "dev-{xtime}",
    "hours": "{random}"
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow an admin to add a brand member</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "user_id": 24,
    "role": "dev-1453364051",
    "hours": 3,
    "member_id": 56
}</code></pre>
<h4 id="admin-members-add-1">admin-members-add-1</h4>
<pre><code>var currResource = {
    "@id": "/brand/105/members"
};

api.submit(currResource, 'add', {
    "user_id": 24,
    "role": "dev-{xtime}",
    "hours": "{random}"
}, successFxn, errorFxn);</code></pre>
<p>Example: should NOT allow a non-admin to add a member</p>
<blockquote>
<p>Status <span style='color:#f00'>403</span></p>
</blockquote>
<pre><code>{
    "@context": "/api/ref/context.php",
    "error": "The requester is not an admin for brand #105.",
    "hints": [

    ],
    "@graph": [

    ],
    "requestURI": "/brand/105/members"
}</code></pre>
<h2 id="admin-member">admin-member</h2>
<pre><code class="language-javascript">
api.loadConcept('admin-member');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>[
    {
        "id": 53,
        "user_id": 21,
        "role": "admin",
        "hours": 0,
        "created": "2015-01-05 11:53:31",
        "name": "User One",
        "joined": "2015-11-17 04:15:14",
        "revoked": null,
        "@id": "/brand/104/members?member_id=53",
        "holdings": "/member/53/accounts",
        "edit": "/form/admin-member-edit",
        "brand": "/brand/104"
    }
]</code></pre>
<p>A brand membership that is admininistered by the current user. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>created</td><td>string</td><td>The date and time when a resource was created, in the form of `YYYY-MM-DD hh:mm:ss`.</td></tr><tr><td>hours</td><td>integer</td><td>The number of hours per week that a member spends towards contributing to the team goals.</td></tr><tr><td>id</td><td>integer</td><td>A numeric identifier for a resource, that is unique for a given resource type.</td></tr><tr><td>joined</td><td>string</td><td>The date when a user joined a team.</td></tr><tr><td>name</td><td>string</td><td>The name of the resource.</td></tr><tr><td>revoked</td><td>NULL</td><td>The date when a relation between resources was ended, such as when a member leaves a team.</td></tr><tr><td>role</td><td>string</td><td>A user's role within the given context, such as a team member role.</td></tr><tr><td>user_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#admin-brand'>brand</a></td><td>link</td><td>The currency issuer related to this resource.</td></tr><tr><td><a href='#admin-member-holdings'>holdings</a></td><td>link</td><td>A collection of accountholdings.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#admin-member-edit'>edit</a></td><td>form</td><td>A form for updating a resource.</td></tr></tbody></table>
<h3 id="admin-member-edit">admin-member-edit</h3>
<pre><code class="language-javascript">
api.loadId(currResource['edit']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Edit",
    "@type": "form",
    "@id": "/form/admin-member-edit",
    "method": "POST",
    "inputs": {
        "required": [

        ],
        "optional": [
            "role",
            "hours"
        ]
    }
}</code></pre>
<p>Edit</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>[]</td></tr><tr><td>inputs optional</td><td>["role","hours"]</td></tr></tbody></table>
<h4 id="admin-member-edit-0">admin-member-edit-0</h4>
<pre><code>var currResource = {
    "@id": "/brand/104/members?member_id=55"
};

api.submit(currResource, 'edit', {
    "role": "assistant -{xtime}",
    "hours": "{random}"
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow an admin to edit a member's info</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "items": [

    ],
    "pageOrder": "asc",
    "itemsLimit": 50,
    "collectionOf": "member",
    "pageOf": null,
    "brand_id": 104,
    "@type": "brandMembers",
    "@id": "/brand/104/members",
    "role": "assistant -1453364051",
    "hours": 464
}</code></pre>
<h4 id="admin-member-edit-1">admin-member-edit-1</h4>
<pre><code>var currResource = {
    "@id": "/brand/105/members?member_id=54"
};

api.submit(currResource, 'edit', {
    "role": "assistant -{xtime}",
    "hours": "{random}"
}, successFxn, errorFxn);</code></pre>
<p>Example: should NOT allow a non-admin to edit a member's info</p>
<blockquote>
<p>Status <span style='color:#f00'>403</span></p>
</blockquote>
<pre><code>{
    "@context": "/api/ref/context.php",
    "error": "The requester is not an admin for brand #105.",
    "hints": [

    ],
    "@graph": [

    ],
    "requestURI": "/brand/105/members?member_id=54"
}</code></pre>
<h2 id="admin-member-holdings">admin-member-holdings</h2>
<pre><code class="language-javascript">
api.loadConcept('admin-member-holdings');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "id": 53,
    "pageOrder": "asc",
    "itemsLimit": 50,
    "collectionOf": "holding",
    "pageOf": "/member/53/accounts",
    "user_id": 21,
    "role": "admin",
    "hours": 0,
    "created": "2015-01-05 11:53:31",
    "brand": "/brand/104",
    "@type": "memberAccounts",
    "@id": "/member/53/accounts",
    "add": "/form/holder-add",
    "holding": [
        "/member/53/accounts?holder_id=41",
        "/member/53/accounts?holder_id=42",
        "/member/53/accounts?holder_id=43"
    ],
    "edit": "/form/admin-holder-edit"
}</code></pre>
<p>A collection of admin-member-holding. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>collectionOf</td><td>string</td><td>The term used for the collection item. For example, instead of promos.items, you could use promos.promo or promos[promos.collectionOf].</td></tr><tr><td>created</td><td>string</td><td>The date and time when a resource was created, in the form of `YYYY-MM-DD hh:mm:ss`.</td></tr><tr><td>hours</td><td>integer</td><td>The number of hours per week that a member spends towards contributing to the team goals.</td></tr><tr><td>id</td><td>integer</td><td>A numeric identifier for a resource, that is unique for a given resource type.</td></tr><tr><td>itemsLimit</td><td>integer</td><td>The maximum number of items that is returned in a collection page. To request more than the itemsLimit, make subsequent requests using the collection's 'next' or 'prev' link.</td></tr><tr><td>pageOf</td><td>string</td><td>The '@id' of the collection to which the current page belongs. In other words, this is the link to the default collection resource without pagination.</td></tr><tr><td>pageOrder</td><td>string</td><td>Either 'asc' or 'desc' based on item id's.</td></tr><tr><td>role</td><td>string</td><td>A user's role within the given context, such as a team member role.</td></tr><tr><td>user_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#admin-brand'>brand</a></td><td>link</td><td>The currency issuer related to this resource.</td></tr><tr><td>holding</td><td>link</td><td>An accountholding.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#admin-member-holdings-add'>add</a></td><td>form</td><td>A form for adding a resource to a collection, or for adding to a resource's tracked quantity.</td></tr><tr><td><a href='#admin-member-holdings-edit'>edit</a></td><td>form</td><td>A form for updating a resource.</td></tr></tbody></table>
<h3 id="admin-member-holdings-add">admin-member-holdings-add</h3>
<pre><code class="language-javascript">
api.loadId(currResource['add']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Add an account holder",
    "@type": "form",
    "@id": "/form/holder-add",
    "method": "POST",
    "inputs": {
        "required": [
            "user_id",
            "account_id",
            "authcode"
        ],
        "optional": [

        ]
    }
}</code></pre>
<p>Add an account holder</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>["user_id","account_id","authcode"]</td></tr><tr><td>inputs optional</td><td>[]</td></tr></tbody></table>
<h4 id="admin-member-holdings-add-0">admin-member-holdings-add-0</h4>
<pre><code>var currResource = {
    "@id": "/member/55/accounts"
};

api.submit(currResource, 'add', {
    "user_id": 24,
    "account_id": 92,
    "authcode": "cftix"
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow an admin to add a new accountholder</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "items": [

    ],
    "pageOrder": "asc",
    "itemsLimit": 50,
    "collectionOf": "holder",
    "pageOf": null,
    "brand_id": 104,
    "@type": "brandHolders",
    "@id": "/brand/104/holders",
    "user_id": 24,
    "account_id": 94,
    "authcode": "cftix",
    "limkey": "abc",
    "holder_id": 46
}</code></pre>
<h4 id="admin-member-holdings-add-1">admin-member-holdings-add-1</h4>
<pre><code>var currResource = {
    "@id": "/member/54/accounts"
};

api.submit(currResource, 'add', {
    "user_id": 22,
    "account_id": 92,
    "authcode": "cftix"
}, successFxn, errorFxn);</code></pre>
<p>Example: should NOT allow a non-admin to add a new accountholder</p>
<blockquote>
<p>Status <span style='color:#f00'>403</span></p>
</blockquote>
<pre><code>{
    "@context": "/api/ref/context.php",
    "error": "The requester is not an admin for brand #105.",
    "hints": [

    ],
    "@graph": [

    ],
    "requestURI": "/brand/105/holders"
}</code></pre>
<h2 id="admin-member-holding">admin-member-holding</h2>
<pre><code class="language-javascript">
api.loadConcept('admin-member-holding');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>[
    {
        "id": 41,
        "authcode": "cftix",
        "created": "2015-01-05 11:53:31",
        "account": "/account/92",
        "@id": "/member/53/accounts?holder_id=41",
        "edit": "/form/admin-holder-edit"
    }
]</code></pre>
<p>An accountholding by a brand member that is administered by the current user. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>authcode</td><td>string</td><td>The permissions related to a resource. In the case of an account or an accountholding, the authcode encodes which transaction activities are allowed based on the intersecting values between account.authcode and holder.authcode. The presence of the following characters in the authcode signify the corresponding permission: 'c' to add budget, 'f' to act as a budget transfer originator, 't' to act as a buget transfer recipient, 'i' for internal budget use within a brand, 'x' for external budget use between brands.</td></tr><tr><td>created</td><td>string</td><td>The date and time when a resource was created, in the form of `YYYY-MM-DD hh:mm:ss`.</td></tr><tr><td>id</td><td>integer</td><td>A numeric identifier for a resource, that is unique for a given resource type.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#admin-account'>account</a></td><td>link</td><td>A brand account. An account with a sign=-1 is a revenue budget that holds debits, with a normal balance of <= 0, to be used for receiving payments. An account with a sign=1 is an expense budget that holds credits, with a normal balance >=0, to be used as payment.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#admin-member-holding-edit'>edit</a></td><td>form</td><td>A form for updating a resource.</td></tr></tbody></table>
<h3 id="admin-member-holding-edit">admin-member-holding-edit</h3>
<pre><code class="language-javascript">
api.loadId(currResource['edit']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Edit",
    "@type": "form",
    "@id": "/form/admin-holder-edit",
    "method": "POST",
    "inputs": {
        "required": [
            "authcode"
        ],
        "optional": [

        ]
    }
}</code></pre>
<p>Edit</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>["authcode"]</td></tr><tr><td>inputs optional</td><td>[]</td></tr></tbody></table>
<h4 id="admin-member-holding-edit-0">admin-member-holding-edit-0</h4>
<pre><code>var currResource = {
    "@id": "/brand/104/holders?holder_id=43"
};

api.submit(currResource, 'edit', {
    "authcode": "ftix -w"
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow an admin to edit a holder's authcode</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "id": 55,
    "items": [

    ],
    "pageOrder": "asc",
    "itemsLimit": 50,
    "collectionOf": "holding",
    "pageOf": null,
    "user_id": 23,
    "role": "assistant -1453364051",
    "hours": 464,
    "created": "2015-01-05 11:53:31",
    "brand": "/brand/104",
    "@type": "memberAccounts",
    "@id": "/member/55/accounts",
    "authcode": "ftix -w"
}</code></pre>
<h4 id="admin-member-holding-edit-1">admin-member-holding-edit-1</h4>
<pre><code>var currResource = {
    "@id": "/brand/104/holders?holder_id=44"
};

api.submit(currResource, 'edit', {
    "name": "my -{xtime}",
    "authcode": "{random}"
}, successFxn, errorFxn);</code></pre>
<p>Example: should NOT allow a non-admin to edit an account's info</p>
<blockquote>
<p>Status <span style='color:#f00'>403</span></p>
</blockquote>
<pre><code>{
    "@context": "/api/ref/context.php",
    "error": "These parameters may not be set by the user: [\"name\"].",
    "hints": [

    ],
    "@graph": [

    ],
    "requestURI": "/member/55/accounts?holder_id=45"
}</code></pre>
<h2 id="admin-accounts">admin-accounts</h2>
<pre><code class="language-javascript">
api.loadConcept('admin-accounts');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "pageOrder": "asc",
    "itemsLimit": 50,
    "collectionOf": "account",
    "pageOf": "/brand/104/accounts",
    "brand_id": 104,
    "@type": "brandAccounts",
    "@id": "/brand/104/accounts",
    "add": "/form/account-add",
    "account": [
        "/brand/104/accounts?account_id=92",
        "/brand/104/accounts?account_id=93",
        "/brand/104/accounts?account_id=94"
    ],
    "edit": "/form/admin-account-edit"
}</code></pre>
<p>A collection of admin-account. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>brand_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td>collectionOf</td><td>string</td><td>The term used for the collection item. For example, instead of promos.items, you could use promos.promo or promos[promos.collectionOf].</td></tr><tr><td>itemsLimit</td><td>integer</td><td>The maximum number of items that is returned in a collection page. To request more than the itemsLimit, make subsequent requests using the collection's 'next' or 'prev' link.</td></tr><tr><td>pageOf</td><td>string</td><td>The '@id' of the collection to which the current page belongs. In other words, this is the link to the default collection resource without pagination.</td></tr><tr><td>pageOrder</td><td>string</td><td>Either 'asc' or 'desc' based on item id's.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#admin-account'>account</a></td><td>link</td><td>A brand account. An account with a sign=-1 is a revenue budget that holds debits, with a normal balance of <= 0, to be used for receiving payments. An account with a sign=1 is an expense budget that holds credits, with a normal balance >=0, to be used as payment.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#admin-accounts-add'>add</a></td><td>form</td><td>A form for adding a resource to a collection, or for adding to a resource's tracked quantity.</td></tr><tr><td><a href='#admin-accounts-edit'>edit</a></td><td>form</td><td>A form for updating a resource.</td></tr></tbody></table>
<h3 id="admin-accounts-add">admin-accounts-add</h3>
<pre><code class="language-javascript">
api.loadId(currResource['add']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Add an account",
    "@type": "form",
    "@id": "/form/account-add",
    "method": "POST",
    "inputs": {
        "required": [
            "name",
            "authcode",
            "unit",
            "sign"
        ],
        "optional": [

        ]
    }
}</code></pre>
<p>Add an account</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>["name","authcode","unit","sign"]</td></tr><tr><td>inputs optional</td><td>[]</td></tr></tbody></table>
<h4 id="admin-accounts-add-0">admin-accounts-add-0</h4>
<pre><code>var currResource = {
    "@id": "/brand/104/accounts"
};

api.submit(currResource, 'add', {
    "name": "test -{xtime}",
    "authcode": "cftix",
    "unit": "hour"
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow an admin to add a new account</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "items": [

    ],
    "pageOrder": "asc",
    "itemsLimit": 50,
    "collectionOf": "account",
    "pageOf": null,
    "brand_id": 104,
    "@type": "brandAccounts",
    "@id": "/brand/104/accounts",
    "name": "test -1453364051",
    "authcode": "cftix",
    "unit": "hour",
    "sign": 1,
    "account_id": 116
}</code></pre>
<h4 id="admin-accounts-add-1">admin-accounts-add-1</h4>
<pre><code>var currResource = {
    "@id": "/brand/105/accounts"
};

api.submit(currResource, 'add', {
    "name": "test -{xtime}",
    "authcode": "cftix",
    "unit": "hour"
}, successFxn, errorFxn);</code></pre>
<p>Example: should NOT allow a non-admin to add an account</p>
<blockquote>
<p>Status <span style='color:#f00'>403</span></p>
</blockquote>
<pre><code>{
    "@context": "/api/ref/context.php",
    "error": "The requester is not an admin for brand #105.",
    "hints": [

    ],
    "@graph": [

    ],
    "requestURI": "/brand/105/accounts"
}</code></pre>
<h2 id="admin-account">admin-account</h2>
<pre><code class="language-javascript">
api.loadConcept('admin-account');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>[
    {
        "id": 92,
        "name": "Main Revenue",
        "balance": -1399.98,
        "unit": "hour",
        "authcode": "cftix",
        "created": "2015-01-05 11:53:31",
        "throttle_id": 0,
        "@id": "/brand/104/accounts?account_id=92",
        "holders": "/account/92/holders",
        "edit": "/form/admin-account-edit",
        "brand": "/brand/104"
    }
]</code></pre>
<p>A brand account that is administered by the current user. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>authcode</td><td>string</td><td>The permissions related to a resource. In the case of an account or an accountholding, the authcode encodes which transaction activities are allowed based on the intersecting values between account.authcode and holder.authcode. The presence of the following characters in the authcode signify the corresponding permission: 'c' to add budget, 'f' to act as a budget transfer originator, 't' to act as a buget transfer recipient, 'i' for internal budget use within a brand, 'x' for external budget use between brands.</td></tr><tr><td>balance</td><td>double</td><td>The available amount related to a resource, such as an account balance.</td></tr><tr><td>created</td><td>string</td><td>The date and time when a resource was created, in the form of `YYYY-MM-DD hh:mm:ss`.</td></tr><tr><td>id</td><td>integer</td><td>A numeric identifier for a resource, that is unique for a given resource type.</td></tr><tr><td>name</td><td>string</td><td>The name of the resource.</td></tr><tr><td>throttle_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td>unit</td><td>string</td><td>The accounting-unit of a budget, also the currency unit. The only possible value right now is XTE.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#admin-brand'>brand</a></td><td>link</td><td>The currency issuer related to this resource.</td></tr><tr><td><a href='#admin-account-holders'>holders</a></td><td>link</td><td>A collection of accountholders.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#admin-account-edit'>edit</a></td><td>form</td><td>A form for updating a resource.</td></tr></tbody></table>
<h3 id="admin-account-edit">admin-account-edit</h3>
<pre><code class="language-javascript">
api.loadId(currResource['edit']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Edit",
    "@type": "form",
    "@id": "/form/admin-account-edit",
    "method": "POST",
    "inputs": {
        "required": [

        ],
        "optional": [
            "name",
            "authcode",
            "throttle_id"
        ]
    }
}</code></pre>
<p>Edit</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>[]</td></tr><tr><td>inputs optional</td><td>["name","authcode","throttle_id"]</td></tr></tbody></table>
<h4 id="admin-account-edit-0">admin-account-edit-0</h4>
<pre><code>var currResource = {
    "@id": "/brand/104/accounts?account_id=94"
};

api.submit(currResource, 'edit', {
    "name": "my -{xtime}",
    "authcode": "ft -w"
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow an admin to edit an account's info</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "items": [

    ],
    "pageOrder": "asc",
    "itemsLimit": 50,
    "collectionOf": "account",
    "pageOf": null,
    "brand_id": 104,
    "@type": "brandAccounts",
    "@id": "/brand/104/accounts",
    "name": "my -1453364051",
    "authcode": "ft -w"
}</code></pre>
<h4 id="admin-account-edit-1">admin-account-edit-1</h4>
<pre><code>var currResource = {
    "@id": "/brand/105/accounts?account_id=97"
};

api.submit(currResource, 'edit', {
    "name": "my -{xtime}",
    "authcode": "{random}"
}, successFxn, errorFxn);</code></pre>
<p>Example: should NOT allow a non-admin to edit an account's info</p>
<blockquote>
<p>Status <span style='color:#f00'>403</span></p>
</blockquote>
<pre><code>{
    "@context": "/api/ref/context.php",
    "error": "The requester is not an admin for brand #105.",
    "hints": [

    ],
    "@graph": [

    ],
    "requestURI": "/brand/105/accounts?account_id=97"
}</code></pre>
<h2 id="admin-account-holders">admin-account-holders</h2>
<pre><code class="language-javascript">
api.loadConcept('admin-account-holders');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "id": 92,
    "pageOrder": "asc",
    "itemsLimit": 50,
    "collectionOf": "holder",
    "pageOf": "/account/92/holders",
    "brand": "/brand/104",
    "@type": "accountHolders",
    "@id": "/account/92/holders",
    "add": "/form/holder-add",
    "holder": [
        "/account/92/holders?holder_id=41"
    ]
}</code></pre>
<p>A collection of admin-account-holder. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>collectionOf</td><td>string</td><td>The term used for the collection item. For example, instead of promos.items, you could use promos.promo or promos[promos.collectionOf].</td></tr><tr><td>id</td><td>integer</td><td>A numeric identifier for a resource, that is unique for a given resource type.</td></tr><tr><td>itemsLimit</td><td>integer</td><td>The maximum number of items that is returned in a collection page. To request more than the itemsLimit, make subsequent requests using the collection's 'next' or 'prev' link.</td></tr><tr><td>pageOf</td><td>string</td><td>The '@id' of the collection to which the current page belongs. In other words, this is the link to the default collection resource without pagination.</td></tr><tr><td>pageOrder</td><td>string</td><td>Either 'asc' or 'desc' based on item id's.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#admin-brand'>brand</a></td><td>link</td><td>The currency issuer related to this resource.</td></tr><tr><td>holder</td><td>link</td><td>An accountholder.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#admin-account-holders-add'>add</a></td><td>form</td><td>A form for adding a resource to a collection, or for adding to a resource's tracked quantity.</td></tr></tbody></table>
<h3 id="admin-account-holders-add">admin-account-holders-add</h3>
<pre><code class="language-javascript">
api.loadId(currResource['add']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Add an account holder",
    "@type": "form",
    "@id": "/form/holder-add",
    "method": "POST",
    "inputs": {
        "required": [
            "user_id",
            "account_id",
            "authcode"
        ],
        "optional": [

        ]
    }
}</code></pre>
<p>Add an account holder</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>["user_id","account_id","authcode"]</td></tr><tr><td>inputs optional</td><td>[]</td></tr></tbody></table>
<h4 id="admin-account-holders-add-0">admin-account-holders-add-0</h4>
<pre><code>var currResource = {
    "@id": "/member/55/accounts"
};

api.submit(currResource, 'add', {
    "user_id": 24,
    "account_id": 92,
    "authcode": "cftix"
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow an admin to add a new accountholder</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "items": [

    ],
    "pageOrder": "asc",
    "itemsLimit": 50,
    "collectionOf": "holding",
    "pageOf": null,
    "member_id": 55,
    "brand_id": 104,
    "user_id": 24,
    "role": "staff",
    "hours": 0,
    "created": "2015-01-05 11:53:31",
    "@type": "memberAccounts",
    "@id": "/member/55/accounts",
    "account_id": 92,
    "authcode": "cftix",
    "limkey": "abc",
    "holder_id": 48
}</code></pre>
<h4 id="admin-account-holders-add-1">admin-account-holders-add-1</h4>
<pre><code>var currResource = {
    "@id": "/member/54/accounts"
};

api.submit(currResource, 'add', {
    "user_id": 22,
    "account_id": 92,
    "authcode": "cftix"
}, successFxn, errorFxn);</code></pre>
<p>Example: should NOT allow a non-admin to add a new accountholder</p>
<blockquote>
<p>Status <span style='color:#f00'>403</span></p>
</blockquote>
<pre><code>{
    "@context": "/api/ref/context.php",
    "error": "The requester is not an admin for brand #105.",
    "hints": [

    ],
    "@graph": [

    ],
    "requestURI": "/brand/105/holders"
}</code></pre>
<h2 id="admin-account-holder">admin-account-holder</h2>
<pre><code class="language-javascript">
api.loadConcept('admin-account-holder');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>[
    {
        "id": 41,
        "authcode": "cftix",
        "created": "2015-01-05 11:53:31",
        "member_id": 53,
        "account": "/account/92",
        "user": "/user/21/about",
        "@id": "/account/92/holders?holder_id=41",
        "edit": "/form/admin-holder-edit"
    }
]</code></pre>
<p>A holder of a brand account thta is administered by the current user. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>authcode</td><td>string</td><td>The permissions related to a resource. In the case of an account or an accountholding, the authcode encodes which transaction activities are allowed based on the intersecting values between account.authcode and holder.authcode. The presence of the following characters in the authcode signify the corresponding permission: 'c' to add budget, 'f' to act as a budget transfer originator, 't' to act as a buget transfer recipient, 'i' for internal budget use within a brand, 'x' for external budget use between brands.</td></tr><tr><td>created</td><td>string</td><td>The date and time when a resource was created, in the form of `YYYY-MM-DD hh:mm:ss`.</td></tr><tr><td>id</td><td>integer</td><td>A numeric identifier for a resource, that is unique for a given resource type.</td></tr><tr><td>member_id</td><td>integer</td><td>...</td></tr><tr><td>user</td><td>string</td><td>A person-resource.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#admin-account'>account</a></td><td>link</td><td>A brand account. An account with a sign=-1 is a revenue budget that holds debits, with a normal balance of <= 0, to be used for receiving payments. An account with a sign=1 is an expense budget that holds credits, with a normal balance >=0, to be used as payment.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#admin-account-holder-edit'>edit</a></td><td>form</td><td>A form for updating a resource.</td></tr></tbody></table>
<h3 id="admin-account-holder-edit">admin-account-holder-edit</h3>
<pre><code class="language-javascript">
api.loadId(currResource['edit']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Edit",
    "@type": "form",
    "@id": "/form/admin-holder-edit",
    "method": "POST",
    "inputs": {
        "required": [
            "authcode"
        ],
        "optional": [

        ]
    }
}</code></pre>
<p>Edit</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>["authcode"]</td></tr><tr><td>inputs optional</td><td>[]</td></tr></tbody></table>
<h4 id="admin-account-holder-edit-0">admin-account-holder-edit-0</h4>
<pre><code>var currResource = {
    "@id": "/brand/104/holders?holder_id=43"
};

api.submit(currResource, 'edit', {
    "authcode": "ftix -w"
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow an admin to edit a holder's authcode</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "items": [

    ],
    "pageOrder": "asc",
    "itemsLimit": 50,
    "collectionOf": "holder",
    "pageOf": null,
    "brand_id": 104,
    "@type": "brandHolders",
    "@id": "/brand/104/holders",
    "authcode": "ftix -w"
}</code></pre>
<h4 id="admin-account-holder-edit-1">admin-account-holder-edit-1</h4>
<pre><code>var currResource = {
    "@id": "/brand/104/holders?holder_id=44"
};

api.submit(currResource, 'edit', {
    "name": "my -{xtime}",
    "authcode": "{random}"
}, successFxn, errorFxn);</code></pre>
<p>Example: should NOT allow a non-admin to edit an account's info</p>
<blockquote>
<p>Status <span style='color:#f00'>403</span></p>
</blockquote>
<pre><code>{
    "@context": "/api/ref/context.php",
    "error": "These parameters may not be set by the user: [\"name\"].",
    "hints": [

    ],
    "@graph": [

    ],
    "requestURI": "/brand/104/holders?holder_id=44"
}</code></pre>
<h2 id="admin-about">admin-about</h2>
<pre><code class="language-javascript">
api.loadConcept('admin-about');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "url": "http://tatag.cc/104",
    "brand_id": 104,
    "@type": "brandAbout",
    "@id": "/brand/104/about",
    "name": "abc",
    "description": "for testing",
    "mission": "to be the first brand",
    "created": "2015-01-05 11:53:31",
    "advisor": "http://tatag.dev/api/advisor.php/{?brand_id,revBudget,expBudget,inflow,outflow,numMembers,totalMemberHours}",
    "type_system": "for-profit",
    "type_id": 9,
    "country_code": "USA",
    "area_code": 206,
    "tally": {
        "@type": "budgetTally",
        "added": 1500.11,
        "intrause": 90.76,
        "inflow": 9.37,
        "outflow": 0,
        "revBudget": 1399.98,
        "expBudget": 1409.35,
        "numMembers": 2,
        "totalMemberHours": 0
    }
}</code></pre>
<p>Public information about a brand. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>advisor</td><td>string</td><td>...</td></tr><tr><td>area_code</td><td>integer</td><td>The phone area code where a brand is located. (optional, self-reported)</td></tr><tr><td>brand_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td>country_code</td><td>string</td><td>The ISO3 code of a brand location.</td></tr><tr><td>created</td><td>string</td><td>The date and time when a resource was created, in the form of `YYYY-MM-DD hh:mm:ss`.</td></tr><tr><td>description</td><td>string</td><td>...</td></tr><tr><td>mission</td><td>string</td><td>...</td></tr><tr><td>name</td><td>string</td><td>The name of the resource.</td></tr><tr><td>type_id</td><td>integer</td><td>A brand's self-reported classification.</td></tr><tr><td>type_system</td><td>string</td><td>The classification system that is used to determine the brand type_id value.</td></tr><tr><td>url</td><td>string</td><td>A link to a web page or image, typically not considered as an API data and therefore not expected to be dereferenced as part of the payload but instead opened as an external link or used in HTML representations.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#admin-tally'>tally</a></td><td>link</td><td>Periodic aggregated budget activity information, by brand and type of activity.</td></tr></tbody></table>
<h2 id="admin-tally">admin-tally</h2>
<pre><code class="language-javascript">
api.loadConcept('admin-tally');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "@type": "budgetTally",
    "added": 1500.11,
    "intrause": 90.76,
    "inflow": 9.37,
    "outflow": 0,
    "revBudget": 1399.98,
    "expBudget": 1409.35,
    "numMembers": 2,
    "totalMemberHours": 0
}</code></pre>
<p>A summary of a brand's budget balances and activity. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>added</td><td>double</td><td>...</td></tr><tr><td>expBudget</td><td>double</td><td>...</td></tr><tr><td>inflow</td><td>double</td><td>...</td></tr><tr><td>intrause</td><td>double</td><td>...</td></tr><tr><td>numMembers</td><td>integer</td><td>...</td></tr><tr><td>outflow</td><td>integer</td><td>...</td></tr><tr><td>revBudget</td><td>double</td><td>...</td></tr><tr><td>totalMemberHours</td><td>integer</td><td>...</td></tr></tbody></table>
<h2 id="admin-promos">admin-promos</h2>
<pre><code class="language-javascript">
api.loadConcept('admin-promos');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "pageOrder": "desc",
    "itemsLimit": 50,
    "collectionOf": "promo",
    "pageOf": "/brand/104/promos",
    "brand_id": 104,
    "@type": "brandPromos",
    "@id": "/brand/104/promos",
    "add": "/form/promo-add",
    "promo": [
        "/promo/1",
        "/promo/3",
        "/promo/4"
    ]
}</code></pre>
<p>A page-colleciton of admin-promo. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>brand_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td>collectionOf</td><td>string</td><td>The term used for the collection item. For example, instead of promos.items, you could use promos.promo or promos[promos.collectionOf].</td></tr><tr><td>itemsLimit</td><td>integer</td><td>The maximum number of items that is returned in a collection page. To request more than the itemsLimit, make subsequent requests using the collection's 'next' or 'prev' link.</td></tr><tr><td>pageOf</td><td>string</td><td>The '@id' of the collection to which the current page belongs. In other words, this is the link to the default collection resource without pagination.</td></tr><tr><td>pageOrder</td><td>string</td><td>Either 'asc' or 'desc' based on item id's.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#admin-promo'>promo</a></td><td>link</td><td>A brand promotion, used to advertise anything that could be the target of a payment.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#admin-promos-add'>add</a></td><td>form</td><td>A form for adding a resource to a collection, or for adding to a resource's tracked quantity.</td></tr></tbody></table>
<h3 id="admin-promos-add">admin-promos-add</h3>
<pre><code class="language-javascript">
api.loadId(currResource['add']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Add",
    "@type": "form",
    "@id": "/form/promo-add",
    "method": "POST",
    "inputs": {
        "required": [
            "name",
            "description",
            "amount",
            "holder_id"
        ],
        "optional": [
            "imageURL",
            "infoURL",
            "expires",
            "by_all_limit",
            "by_brand_limit",
            "by_user_limit",
            "by_user_wait",
            "keyword"
        ]
    }
}</code></pre>
<p>Add</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>["name","description","amount","holder_id"]</td></tr><tr><td>inputs optional</td><td>["imageURL","infoURL","expires","by_all_limit","by_brand_limit","by_user_limit","by_user_wait","keyword"]</td></tr></tbody></table>
<h4 id="admin-promos-add-0">admin-promos-add-0</h4>
<pre><code>var currResource = {
    "@id": "/brand/104/promos"
};

api.submit(currResource, 'add', {
    "name": "product promo {hex}",
    "description": "a brand 104 promo {hex}",
    "amount": 5.43,
    "holder_id": 41
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow a brand member to add a promo specification</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "name": "product promo {hex}",
    "description": "a brand 104 promo {hex}",
    "amount": 5.43,
    "promo_id": 3,
    "relay": {
        "amount_min": 5.43,
        "amount_max": 5.43,
        "txntype": "pn",
        "secret": "48c4",
        "by_all_limit": 25,
        "by_brand_limit": 5,
        "by_user_limit": 2,
        "by_user_wait": 24,
        "relay_id": 5
    },
    "relay_id": 5
}</code></pre>
<h4 id="admin-promos-add-1">admin-promos-add-1</h4>
<pre><code>var currResource = {
    "@id": "/brand/105/promos"
};

api.submit(currResource, 'add', {
    "name": "product promo {hex}",
    "description": "a brand 105 promo {hex}",
    "amount": 3.45
}, successFxn, errorFxn);</code></pre>
<p>Example: should NOT allow a non-brand member to add a promo specification</p>
<blockquote>
<p>Status <span style='color:#f00'>403</span></p>
</blockquote>
<pre><code>{
    "@context": "/api/ref/context.php",
    "error": "The requester is not a member of brand #105.",
    "hints": [

    ],
    "@graph": [

    ],
    "requestURI": "/brand/105/promos"
}</code></pre>
<h4 id="admin-promos-add-2">admin-promos-add-2</h4>
<pre><code>var currResource = {
    "@id": "/promo/collection"
};

api.submit(currResource, 'add', {
    "name": "product promo {hex}",
    "description": "a brand 104 promo {hex}",
    "amount": 5.43,
    "holder_id": 41
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow a brand member to add using the promo/collection endpoint</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "name": "product promo {hex}",
    "description": "a brand 104 promo {hex}",
    "amount": 5.43,
    "promo_id": 4,
    "relay": {
        "amount_min": 5.43,
        "amount_max": 5.43,
        "txntype": "pn",
        "secret": "8fdc",
        "by_all_limit": 25,
        "by_brand_limit": 5,
        "by_user_limit": 2,
        "by_user_wait": 24,
        "relay_id": 6
    },
    "relay_id": 6
}</code></pre>
<h2 id="admin-promo">admin-promo</h2>
<pre><code class="language-javascript">
api.loadConcept('admin-promo');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>[
    {
        "id": 1,
        "name": "Test promo",
        "description": "A brand #104 promo",
        "amount": 25,
        "imageURL": null,
        "infoURL": "http://tatag.dev/ad/1",
        "created": "2014-12-31 16:00:00",
        "updated": null,
        "expires": null,
        "keyword": "ad",
        "by_all_limit": 25,
        "by_brand_limit": 5,
        "by_user_limit": 25,
        "by_user_wait": 24,
        "brand": "/brand/104",
        "relay": "/relay/1",
        "@id": "/promo/1",
        "@type": "promo",
        "payURL": "http://tatag.dev/for/ad-1",
        "code": "ad-1",
        "promoPage": "http://tatag.dev/ad/1",
        "edit": "/form/promo-edit"
    }
]</code></pre>
<p>A brand promo that is administered by the current user. A promo is intended to announce or advertise products, services, and projects that any user could help pay for. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>amount</td><td>integer</td><td>A numeric value that quantifies an important aspect of a resource. For example, in the context of a promo or transaction record, the amount may be a product price or a suggested donation amount.</td></tr><tr><td>by_all_limit</td><td>integer</td><td>This is a weekly limit on the total inflow transaction amount for a given account or usage for a given product, regardless of the payor's brand or user id. This is similar to coupon restrictions, allowing your brand to set limits on transactions and also to combat spammy payment offers. </td></tr><tr><td>by_brand_limit</td><td>integer</td><td>A weekly limit on total inflow transaction amount for a given account or usage for a given promo, based on the payor's brand id. This is similar to coupon restrictions, allowing your brand to set limits on transactions and also to combat spammy payment offers. </td></tr><tr><td>by_user_limit</td><td>integer</td><td>A weekly limit on total inflow transaction amount for a given account or usage for a given promo, based on the payor's user id. This is similar to coupon restrictions, allowing your brand to set limits on transactions and also to combat spammy payment offers. </td></tr><tr><td>by_user_wait</td><td>integer</td><td>How long a user must wait after using a promo, before that user can reuse the same promo.</td></tr><tr><td>code</td><td>string</td><td>An alpha-numeric string that a payment recipient shares with a payor to authorize a payment or promo use.</td></tr><tr><td>created</td><td>string</td><td>The date and time when a resource was created, in the form of `YYYY-MM-DD hh:mm:ss`.</td></tr><tr><td>description</td><td>string</td><td>...</td></tr><tr><td>expires</td><td>NULL</td><td>The date after which a given resource will no longer be available. For example, a promo may expire after a week.</td></tr><tr><td>id</td><td>integer</td><td>A numeric identifier for a resource, that is unique for a given resource type.</td></tr><tr><td>imageURL</td><td>NULL</td><td>If given, a user interface provider may use this link to display a brand icon or promo image.</td></tr><tr><td>infoURL</td><td>string</td><td>External web page about a resource.</td></tr><tr><td>keyword</td><td>string</td><td>In the context of a relay, this is the prefix to be used with a relay id, such as the 'food-' in the relay token value of 'food-645'. This keyword is assigned by the user when creating a promo, and also helps to counter (but not prevent) spammy transaction offers by making it harder to guess the full value of a relay token.</td></tr><tr><td>name</td><td>string</td><td>The name of the resource.</td></tr><tr><td>payURL</td><td>string</td><td>A URL that, when clicked, is intended to automatically open the tatag.cc wallet of a payor.</td></tr><tr><td>promoPage</td><td>string</td><td>The tatag.cc-hosted web page about the promo. An infoURL, when available, should be preferred as an external link.</td></tr><tr><td>updated</td><td>NULL</td><td>The UNIX timestamp when a resource was last updated.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#admin-brand'>brand</a></td><td>link</td><td>The currency issuer related to this resource.</td></tr><tr><td>relay</td><td>link</td><td>A token that is used to preauthorize the use of a recipient account.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#admin-promo-edit'>edit</a></td><td>form</td><td>A form for updating a resource.</td></tr></tbody></table>
<h3 id="admin-promo-edit">admin-promo-edit</h3>
<pre><code class="language-javascript">
api.loadId(currResource['edit']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Edit",
    "@type": "form",
    "@id": "/form/promo-edit",
    "method": "POST",
    "inputs": {
        "required": [

        ],
        "optional": [
            "name",
            "description",
            "amount",
            "imageURL",
            "infoURL",
            "expires",
            "keyword"
        ]
    }
}</code></pre>
<p>Edit</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>[]</td></tr><tr><td>inputs optional</td><td>["name","description","amount","imageURL","infoURL","expires","keyword"]</td></tr></tbody></table>
<h4 id="admin-promo-edit-0">admin-promo-edit-0</h4>
<pre><code>var currResource = {
    "@id": "/promo/1"
};

api.submit(currResource, 'edit', {
    "name": "{hex}",
    "amount": 8.97
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow a brand admin to edit a promo specification</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "name": "{hex}",
    "amount": 8.97
}</code></pre>
<h4 id="admin-promo-edit-1">admin-promo-edit-1</h4>
<pre><code>var currResource = {
    "@id": "/promo/2"
};

api.submit(currResource, 'edit', {
    "name": "{hex}",
    "amount": 7.98
}, successFxn, errorFxn);</code></pre>
<p>Example: should NOT allow a non-brand admin to edit a promo specification</p>
<blockquote>
<p>Status <span style='color:#f00'>403</span></p>
</blockquote>
<pre><code>{
    "@context": "/api/ref/context.php",
    "error": "The user is not a member of the brand that owns this promo and does not have accees to its details.",
    "hints": [

    ],
    "@graph": [

    ],
    "requestURI": "/promo/2"
}</code></pre>
<h2 id="admin-throttles">admin-throttles</h2>
<pre><code class="language-javascript">
api.loadConcept('admin-throttles');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "brand_id": 104,
    "@type": "budgetThrottles",
    "@id": "/budget/104/throttles",
    "collectionOf": "throttle",
    "add": "/form/throttle-add",
    "throttle": [
        "/throttle/1",
        "/throttle/2",
        "/throttle/3"
    ]
}</code></pre>
<p>A collection of admin-throttle. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>@type</td><td>string</td><td>...</td></tr><tr><td>brand_id</td><td>integer</td><td>(deprecated)</td></tr><tr><td>collectionOf</td><td>string</td><td>The term used for the collection item. For example, instead of promos.items, you could use promos.promo or promos[promos.collectionOf].</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#admin-throttle'>throttle</a></td><td>link</td><td>A limit on how much an account may be used for transactions for a given period, specified as amount per brand, amount per user, and amount by all.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#admin-throttles-add'>add</a></td><td>form</td><td>A form for adding a resource to a collection, or for adding to a resource's tracked quantity.</td></tr></tbody></table>
<h3 id="admin-throttles-add">admin-throttles-add</h3>
<pre><code class="language-javascript">
api.loadId(currResource['add']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Add an inflow throttle",
    "@type": "form",
    "@id": "/form/throttle-add",
    "method": "POST",
    "inputs": {
        "required": [
            "period",
            "by_all",
            "by_brand",
            "by_user"
        ],
        "optional": [

        ]
    }
}</code></pre>
<p>Add an inflow throttle</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>["period","by_all","by_brand","by_user"]</td></tr><tr><td>inputs optional</td><td>[]</td></tr></tbody></table>
<h4 id="admin-throttles-add-0">admin-throttles-add-0</h4>
<pre><code>var currResource = {
    "@id": "/budget/104/throttles"
};

api.submit(currResource, 'add', {
    "period": 360000,
    "by_all": 100,
    "by_brand": 20,
    "by_user": 2
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow an admin to add a new throttle</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "brand_id": 104,
    "@type": "budgetThrottles",
    "@id": "/budget/104/throttles",
    "collectionOf": "throttle",
    "period": 360000,
    "by_all": 100,
    "by_brand": 20,
    "by_user": 2,
    "throttle_id": 4,
    "created": "2016-01-21 00:14:12",
    "updated": null,
    "ended": null,
    "productURL": null
}</code></pre>
<h4 id="admin-throttles-add-1">admin-throttles-add-1</h4>
<pre><code>var currResource = {
    "@id": "/budget/105/throttles"
};

api.submit(currResource, 'add', {
    "period": 360000,
    "by_all": 100,
    "by_brand": 20,
    "by_user": 2
}, successFxn, errorFxn);</code></pre>
<p>Example: should NOT allow a non-admin to add a throttle</p>
<blockquote>
<p>Status <span style='color:#f00'>403</span></p>
</blockquote>
<pre><code>{
    "@context": "/api/ref/context.php",
    "error": "Only brand #105 admins can add throttling specifications.",
    "hints": [

    ],
    "@graph": [

    ],
    "requestURI": "/budget/105/throttles"
}</code></pre>
<h2 id="admin-throttle">admin-throttle</h2>
<pre><code class="language-javascript">
api.loadConcept('admin-throttle');
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>[
    {
        "id": 1,
        "period": 172800,
        "by_all": 100,
        "by_brand": 20,
        "by_user": 2,
        "created": "2015-02-24 02:48:00",
        "updated": null,
        "ended": null,
        "productURL": null,
        "@id": "/throttle/1",
        "edit": "/form/admin-throttle-edit",
        "brand": "/brand/104"
    }
]</code></pre>
<p>A set of periodic limits imposed on inflows or outflows from an administered account. </p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>@id</td><td>string</td><td>...</td></tr><tr><td>by_all</td><td>integer</td><td>...</td></tr><tr><td>by_brand</td><td>integer</td><td>...</td></tr><tr><td>by_user</td><td>integer</td><td>...</td></tr><tr><td>created</td><td>string</td><td>The date and time when a resource was created, in the form of `YYYY-MM-DD hh:mm:ss`.</td></tr><tr><td>ended</td><td>NULL</td><td>The date of resource or relation deactivation, formatted as `YYYY-MM-DD hh:mm:ss`.</td></tr><tr><td>id</td><td>integer</td><td>A numeric identifier for a resource, that is unique for a given resource type.</td></tr><tr><td>period</td><td>integer</td><td>The time period that applies to a resource.</td></tr><tr><td>productURL</td><td>NULL</td><td>...</td></tr><tr><td>updated</td><td>NULL</td><td>The UNIX timestamp when a resource was last updated.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Links</td></tr><tr><td><a href='#admin-brand'>brand</a></td><td>link</td><td>The currency issuer related to this resource.</td></tr><tr><td colspan='3' style='background-color:#ececec; text-align: left;'>Forms</td></tr><tr><td><a href='#admin-throttle-edit'>edit</a></td><td>form</td><td>A form for updating a resource.</td></tr></tbody></table>
<h3 id="admin-throttle-edit">admin-throttle-edit</h3>
<pre><code class="language-javascript">
api.loadId(currResource['edit']).then(...);
</code></pre>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>// the response returned by promise.then
{
    "title": "Edit",
    "@type": "form",
    "@id": "/form/admin-throttle-edit",
    "method": "POST",
    "inputs": {
        "required": [

        ],
        "optional": [
            "period",
            "by_all",
            "by_brand",
            "by_user"
        ]
    }
}</code></pre>
<p>Edit</p>
<table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>method</td><td>POST</td></tr><tr><td>inputs required</td><td>[]</td></tr><tr><td>inputs optional</td><td>["period","by_all","by_brand","by_user"]</td></tr></tbody></table>
<h4 id="admin-throttle-edit-0">admin-throttle-edit-0</h4>
<pre><code>var currResource = {
    "@id": "/throttle/1"
};

api.submit(currResource, 'edit', {
    "period": 99999999
}, successFxn, errorFxn);</code></pre>
<p>Example: should allow an admin to edit a throttle's specifications</p>
<blockquote>
<p>Status <span style='color:#0f0'>200</span></p>
</blockquote>
<pre><code>{
    "period": 99999999
}</code></pre>				
		</div>
		<div class="dark-box">
			<div class="lang-selector">
				<a href='#' data-language-name='javascript'>javascript</a>
			</div>
		</div>			
	</div>
	
	
	</body>
</html>
